<alfresco-config>


   <plug-ins>
      <element-readers>
         <element-reader element-name="default-controls" class="org.alfresco.web.config.DefaultControlsElementReader"/>
         <element-reader element-name="constraint-handlers" class="org.alfresco.web.config.ConstraintHandlersElementReader"/>
         <element-reader element-name="form" class="org.alfresco.web.config.FormElementReader"/>
      </element-readers>
   </plug-ins>



   <!-- Add in additional Slingshot elements -->
   <config evaluator="string-compare" condition="WebFramework">
      
      <web-framework>
      
         <link-builder>
            <id>slingshot</id>
            <name>Slingshot Link Builder</name>
            <description>Slingshot Link Builder</description>
            <class>org.alfresco.web.site.SlingshotLinkBuilder</class>
         </link-builder>
   
         <page-mapper>
            <id>slingshot</id>
            <name>Slingshot Page Mapper</name>
            <description>Slingshot Page Mapper</description>
            <class>org.alfresco.web.site.SlingshotPageMapper</class>
         </page-mapper>
         
         <user-factory>
            <id>slingshot</id>
            <name>Slingshot User Factory</name>
            <description>Produces Users loaded from Slingshot (Alfresco) Repository</description>
            <class>org.alfresco.web.site.SlingshotUserFactory</class>
         </user-factory>
   
         <!-- Overrides -->
         <framework-defaults>
            <page-mapper>slingshot</page-mapper>
            <link-builder>slingshot</link-builder>       
            <user-factory>slingshot</user-factory>       
         </framework-defaults>
         
         <!-- Application Defaults -->
         <application-defaults>
            <theme>default</theme>
            <site-configuration>slingshot.site.configuration</site-configuration>
            <!-- slingshot region chrome override -->
            <region-chrome>slingshot-region-chrome</region-chrome>
            <!-- no chrome required for components -->
            <component-chrome></component-chrome>
      		<page-type>
      			<id>login</id>
      			<page-instance-id>slingshot-login</page-instance-id>
      		</page-type>
      		<page-type>
      			<id>logout</id>
      			<page-instance-id>slingshot-logout</page-instance-id>
      		</page-type>
         </application-defaults>
         			
			<!-- object model - override to set default store ID to remote store -->
			<model-type>
				<id>chrome</id>
				<version>1.0</version>
				<name>Chrome</name>
				<description>Chrome</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.Chrome</class>
				<search-path-id>webframework.searchpath.chrome</search-path-id>
				<default-store-id>webframework.remotestore.chrome</default-store-id>
			</model-type>
			<model-type>
				<id>component</id>
				<version>1.0</version>
				<name>Component</name>
				<description>Component</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.Component</class>
				<search-path-id>webframework.searchpath.component</search-path-id>
				<default-store-id>webframework.remotestore.component</default-store-id>
			</model-type>
			<model-type>
				<id>component-type</id>
				<version>1.0</version>
				<name>Component Type</name>
				<description>Component Type</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.ComponentType</class>
				<search-path-id>webframework.searchpath.componenttype</search-path-id>
				<default-store-id>webframework.remotestore.componenttype</default-store-id>
			</model-type>
			<model-type>
				<id>configuration</id>
				<version>1.0</version>
				<name>Configuration</name>
				<description>Configuration</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.Configuration</class>
				<search-path-id>webframework.searchpath.configuration</search-path-id>
				<default-store-id>webframework.remotestore.configuration</default-store-id>
			</model-type>
			<model-type>
				<id>content-association</id>
				<version>1.0</version>
				<name>Content Association</name>
				<description>Content Association</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.ContentAssociation</class>
				<search-path-id>webframework.searchpath.contentassociation</search-path-id>
				<default-store-id>webframework.remotestore.contentassociation</default-store-id>
			</model-type>
			<model-type>
				<id>page</id>
				<version>1.0</version>
				<name>Page</name>
				<description>Page</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.Page</class>
				<search-path-id>webframework.searchpath.page</search-path-id>
				<default-store-id>webframework.remotestore.page</default-store-id>
			</model-type>
			<model-type>
				<id>page-type</id>
				<version>1.0</version>
				<name>Page Type</name>
				<description>Page Type</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.PageType</class>
				<search-path-id>webframework.searchpath.pagetype</search-path-id>
				<default-store-id>webframework.remotestore.pagetype</default-store-id>
			</model-type>
			<model-type>
				<id>page-association</id>
				<version>1.0</version>
				<name>Page Association</name>
				<description>Page Association</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.PageAssociation</class>
				<search-path-id>webframework.searchpath.pageassociation</search-path-id>
				<default-store-id>webframework.remotestore.pageassociation</default-store-id>
			</model-type>
			<model-type>
				<id>template-instance</id>
				<version>1.0</version>
				<name>Template Instance</name>
				<description>Template Instance</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.TemplateInstance</class>
				<search-path-id>webframework.searchpath.templateinstance</search-path-id>
				<default-store-id>webframework.remotestore.templateinstance</default-store-id>
			</model-type>
			<model-type>
				<id>template-type</id>
				<version>1.0</version>
				<name>Template Type</name>
				<description>Template Type</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.TemplateType</class>
				<search-path-id>webframework.searchpath.templatetype</search-path-id>
				<default-store-id>webframework.remotestore.templatetype</default-store-id>
			</model-type>
			<model-type>
				<id>theme</id>
				<version>1.0</version>
				<name>Theme</name>
				<description>Theme</description>
				<namespace></namespace>
				<class>org.alfresco.web.framework.model.Theme</class>
				<search-path-id>webframework.searchpath.theme</search-path-id>
				<default-store-id>webframework.remotestore.theme</default-store-id>
			</model-type>
         
         	<!-- Error Handler Pages -->
			<error-handler>
				<id>region-nocomponent</id>
				<processor-id>nocomponent</processor-id>			
			</error-handler>
                  
      </web-framework>

   </config>

   <config evaluator="string-compare" condition="UriTemplate" replace="true">
      <!-- list of URI based page Id templates used by Slingshot -->
      <!-- when pages are requested from the framework, matches are attempted
           against each uri-template, and the token values returned if matched -->
      <uri-templates>
         <uri-template id="sitedashboardpage">/site/{site}/dashboard</uri-template>
         <uri-template id="sitepage">/site/{site}/{pageid}</uri-template>
         <uri-template id="userdashboardpage">/user/{userid}/dashboard</uri-template>
         <uri-template id="userpage">/user/{userid}/{pageid}</uri-template>
         <uri-template id="userprofilepage">/user/{userid}/profile</uri-template>
      </uri-templates>
   </config>

   <config evaluator="string-compare" condition="SitePages" replace="true">
      <pages>
         <page id="calendar">calendar</page>
         <page id="wiki-page">wiki-page?title=Main_Page</page>
         <page id="documentlibrary">documentlibrary</page>
         <page id="discussions-topiclist">discussions-topiclist</page>
         <page id="blog-postlist">blog-postlist</page>
      </pages>
   </config>
   




   <config>
      <default-controls>
         <type name="d:text" template="org/alfresco/forms/controls/textfield.ftl">
            <control-param name="size">50</control-param>
         </type>
         <type name="d:boolean" template="org/alfresco/forms/controls/checkbox.ftl" />
         <type name="association" template="org/alfresco/forms/controls/association-picker.ftl" />
         <type name="abc" template="org/alfresco/abc.ftl">
            <control-param name="a">1</control-param>
            <control-param name="b">Hello</control-param>
            <control-param name="c">For ever and ever.</control-param>
            <control-param name="d"></control-param>
         </type>
      </default-controls>
      <constraint-handlers>
         <constraint type="REGEX" validation-handler="Alfresco.forms.validation.regexMatch" />
         <constraint type="NUMERIC" validation-handler="Alfresco.forms.validation.numericMatch"
                     message="Test Message" message-id="regex_error" />
      </constraint-handlers>
   </config>
   
   <!-- The evaluator would normally be node-type, but that makes testing difficult -->
   <config evaluator="string-compare" condition="content">
      <!-- For this example, I'm going to include all optional attributes -->
      <form submission-url="submission/url">
         <view-form template="/path/view/template" requires-role="Consumer" />
         <edit-form template="/path/edit/template/manager" requires-role="Manager" />
         <edit-form template="/path/edit/template/contributor" requires-role="Contributor" />
         <create-form template="/path/create/template" requires-role="Manager" />
         <field-visibility>
            <!-- This comment is here to test the FormReader -->
            <show id="name" />
            <show id="title" for-mode="view, create" />
            <hide id="quota" for-mode="edit" />
         </field-visibility>
         <appearance>
            <set id="details" appearance="fieldset" />
            <set id="user" parent="details" appearance="panel" />

            <field id="name" label="Name" label-id="field_label_name" disabled="true" set="details"
                     help-text="This is the name of the node" help-text-id="field_help_name" >
               <control template="alfresco/extension/formcontrols/my-name.ftl">
                  <control-param name="foo">bar</control-param>
               </control>
               <constraint-message type="REGEX" message="The name can not contain the character '{0}'"
                                                    message-id="field_error_name" />
            </field>
            <field id="title" label="My Title" set="details" />
            <field id="username" set="user" />
            <field id="quota" set="user" requires-role="Coordinator" /> 
         </appearance>
         <model-override>
            <property name="fields.title.mandatory">true</property>
         </model-override>
      </form>
   </config>

</alfresco-config>