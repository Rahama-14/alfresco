<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>

   <bean id="commandRemoveDirectory" class="org.alfresco.util.exec.RuntimeExec" >
      <property name="commandMap">
          <map>
              <entry key="Windows.*">
                  <value>cmd /C rmdir ${dir}</value>
              </entry>
              <entry key="Linux">
                  <value>rm -rf ${dir}</value>
              </entry>
              <entry key="Mac OS X">
                  <value>rm -rf ${dir}</value>
              </entry>
              <entry key=".*">
                  <value>wibble</value>
              </entry>
          </map>
      </property>
      <property name="defaultProperties">
          <props>
              <prop key="dir">dir_RuntimeExecBootstrapBeanTest</prop>
          </props>
      </property>
      <property name="errorCodes">
          <value>1, 2</value>
      </property>
   </bean>

   <!-- A bean to make sure that the startup doesn't fall over -->
   <bean id="commandFailureGuaranteed" class="org.alfresco.util.exec.RuntimeExec" >
      <property name="commandMap">
          <map>
              <entry key=".*">
                  <value>wibble</value>
              </entry>
          </map>
      </property>
      <property name="errorCodes">
          <value>666</value>
      </property>
   </bean>

   <bean id="testBootstrapCommands" class="org.alfresco.util.exec.RuntimeExecBootstrapBean" >
      <property name="startupCommands">
          <list>
              <ref bean="commandRemoveDirectory" />
          </list>
      </property>
   </bean>
	
   <bean id="testShutdownCommands" class="org.alfresco.util.exec.RuntimeExecShutdownBean" >
      <property name="shutdownCommands">
          <list>
              <ref bean="commandRemoveDirectory" />
          </list>
      </property>
   </bean>
	
   <!-- A bean to make sure that never-ending processes can be handled -->
   <bean id="commandNeverEnding" class="org.alfresco.util.exec.RuntimeExec" >
      <property name="commandMap">
          <map>
              <entry key="Windows.*">
                  <value>cmd</value>
              </entry>
              <entry key=".*">
                  <value>ls</value>
              </entry>
          </map>
      </property>
      <property name="waitForCompletion">
          <value>false</value>
      </property>
      <property name="errorCodes">
          <value>1</value>
      </property>
   </bean>

   <!-- A bean to make sure that never-ending processes can be handled -->
   <bean id="commandListRootDir" class="org.alfresco.util.exec.RuntimeExec" >
      <property name="commandMap">
          <map>
              <entry key="Windows.*">
                  <value>dir c:</value>
              </entry>
              <entry key=".*">
                  <value>ls /</value>
              </entry>
          </map>
      </property>
      <property name="waitForCompletion">
          <value>true</value>
      </property>
      <property name="errorCodes">
          <value>1</value>
      </property>
   </bean>

</beans>
