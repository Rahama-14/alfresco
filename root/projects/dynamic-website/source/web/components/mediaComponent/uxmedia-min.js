(function(){var A=Ext.ux.Media=function(C){Ext.apply(this,C||{});this.toString=this.mediaMarkup;this.initMedia();};A.mediaTypes={"PDF":Ext.apply({tag:"object",cls:"x-media x-media-pdf",type:"application/pdf",style:{position:"absolute",top:"0px",left:"0px","z-index":11002},data:"@url",autoSize:true,params:{src:"@url"}},Ext.isIE?{classid:"CLSID:CA8A9780-280D-11CF-A24D-444553540000"}:false),"WMV":Ext.apply({tag:"object",cls:"x-media x-media-wmv",type:"video/x-ms-wmv",data:"@url",params:{src:"@url",url:"@url",autostart:"@start",showcontrols:"@controls"}},Ext.isIE?{classid:"CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"}:false),"SWF":Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",data:"@url",scripting:"sameDomain",loop:true,start:false,unsupportedText:{cn:["The Adobe Flash Player{0}is required.",{tag:"br"},{tag:"a",cn:"The free download is available here.",href:"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash",target:"_flash"}]},params:{movie:"@url",menu:"@controls",play:"@start",quality:"high",allowscriptaccess:"@scripting",bgcolor:"#FFFFFF",wmode:"opaque",loop:"@loop"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}:false),"JWP":Ext.apply({tag:"object",cls:"x-media x-media-swf x-media-flv",type:"application/x-shockwave-flash",data:"@url",loop:false,start:false,params:{movie:"@url",flashVars:{autostart:"@start",repeat:"@loop",height:"@height",width:"@width",id:"@id"}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}:false),"MOV":Ext.apply({tag:"object",cls:"x-media x-media-mov",type:"video/quicktime",data:"@url",params:{src:"@url",autoplay:"@start",controller:"@controls",enablejavascript:"@scripting"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start"}}:false),"REAL":Ext.apply({tag:"object",cls:"x-media x-media-real",type:"audio/x-pn-realaudio",data:"@url",standby:"Loading Real Media Player components...",params:{src:"@url",autostart:"@start",controller:"@controls",controlls:"@controls",loop:"@loop",console:"TES"}},Ext.isIE?{classid:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA"}:false),"SVG":{tag:"object",cls:"x-media x-media-img x-media-svg",type:"image/svg+xml",data:"@url"},"GIF":{tag:"img",cls:"x-media x-media-img x-media-gif",src:"@url"},"JPEG":{tag:"img",cls:"x-media x-media-img x-media-jpeg",src:"@url"},"JP2":{tag:"object",cls:"x-media x-media-img x-media-jp2",type:"image/jpeg2000-image",data:"@url"},"PNG":{tag:"img",cls:"x-media x-media-img x-media-png",src:"@url"},"HTM":{tag:"iframe",cls:"x-media x-media-html",frameBorder:0,style:{overflow:"auto"},src:"@url"},"TXT":{tag:"object",cls:"x-media x-media-text",type:"text/plain",style:{overflow:"auto"},data:"@url"},"SILVER":{tag:"object",cls:"x-media x-media-silverlight",type:"application/x-silverlight",data:"@url"},"OFFICE":{tag:"object",cls:"x-media x-media-office",type:"application/x-msoffice",data:"@url"},"XML":{tag:"iframe",cls:"x-media x-media-xml",style:{overflow:"auto"},src:"@url"},"QTMIDI":Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-midi",type:"audio/midi",style:{overflow:"auto"},data:"@url",params:{autostart:"@start"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start",enablejavascript:"@scripting"}}:false),"QTMP3":Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-mpeg",type:"audio/mpeg",data:"@url",params:{autostart:"@start"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start",enablejavascript:"@scripting"}}:false),"QTWAV":Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-wav",type:"audio/wav",data:"@url",params:{autostart:"@start"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start",enablejavascript:"@scripting"}}:false)};Ext.apply(A.prototype,{mediaObject:null,mediaCfg:null,mediaVersion:null,requiredVersion:null,unsupportedText:null,init:function(C){if(C&&this.getEl==undefined){Ext.applyIf(C,this);}},initMedia:function(){},onBeforeMedia:function(G,E,F){var C=G||this.mediaCfg,D;if(C&&(D=this.getMediaType(C.mediaType))){C.autoSize=(C.autoSize==undefined?D.autoSize===true:C.autoSize===true);if(C.autoSize&&(E=Ext.isReady?Ext.get(E||this.lastCt):null)){C.height=E.getHeight(true)||this.assert(C.height,"100%");C.width=E.getWidth(true)||this.assert(C.width,"100%");}}},onAfterMedia:function(){var C=this.mediaCfg?this.mediaCfg.listeners:null;if(C&&this.mediaObject){this.mediaObject.on(C);}},getMediaType:function(C){return A.mediaTypes[C];},assert:function(C,D){C=typeof C=="function"?C.call(C.scope||null):C;return Ext.value(C,D);},mediaMarkup:function(C,E,O,J){C=C||this.mediaCfg;if(!C){return"";}var G=Ext.apply({url:false,autoSize:false},C);G.url=this.assert(G.url,false);if(G.url){var M,D,H=Ext.Element;var F=Ext.apply({},this.getMediaType(G.mediaType)||false);var I=Ext.apply(F.params||{},G.params||{});for(var N in I){if(I.hasOwnProperty(N)){G.children||(G.children=[]);D=this.assert(I[N],null);if(D!==null){G.children.push({tag:"param",name:N,value:typeof D=="object"?Ext.urlEncode(D):encodeURI(D)});}}}delete F.params;F.style=this.assert(F.style,{});G.height=this.assert(O||G.height||F.height,"100%");G.width=this.assert(E||G.width||F.width,"100%");Ext.apply(F.style,{height:H.addUnits((G.autoSize?"100%":G.height),H.prototype.defaultUnit),width:H.addUnits((G.autoSize?"100%":G.width),H.prototype.defaultUnit)});F.html=this.assert(G.unsupportedText||this.unsupportedText||F.unsupportedText,null);G=Ext.apply({tag:"object"},G,F);G.id||(G.id=Ext.id());var L={url:G.url||"",height:parseInt(G.height,10)||100,width:parseInt(G.width,10)||100,scripting:this.assert(G.scripting,false),controls:this.assert(G.controls,false),start:this.assert(G.start,false),loop:this.assert(G.loop,false),volume:this.assert(G.volume,10),id:G.id};delete G.url;delete G.mediaType;delete G.controls;delete G.start;delete G.loop;delete G.scripting;delete G.volume;delete G.autoSize;delete G.params;delete G.unsupportedText;delete G.renderOnResize;delete G.listeners;delete G.height;delete G.width;return Ext.DomHelper.markup(G).replace(/(%40url|@url)/g,L.url).replace(/(%40start|@start)/g,L.start+"").replace(/(%40controls|@controls)/g,L.controls+"").replace(/(%40id|@id)/g,L.id+"").replace(/(%40loop|@loop)/g,L.loop+"").replace(/(%40volume|@volume)/g,L.volume+"").replace(/(%40scripting|@scripting)/g,L.scripting+"").replace(/(%40width|@width)/g,L.width+"").replace(/(%40height|@height)/g,L.height+"");}else{var K=this.assert(G.unsupportedText||this.unsupportedText||F.unsupportedText,null);K=K?Ext.DomHelper.markup(K):null;return String.format(K||"Media Configuration/Plugin Error"," "," ");}},renderMedia:function(I,E,H,C,F){if(!Ext.isReady){Ext.onReady(this.renderMedia.createDelegate(this,Array.prototype.slice.call(arguments,0)));}var G=this.mediaCfg=I||this.mediaCfg;E=Ext.get(E||this.lastCt||(this.mediaObject?this.mediaObject.parentNode:null));this.onBeforeMedia.call(this,G,E,H,C,F);if(E){var D;if(E&&G&&(D=this.mediaMarkup(G,C,F,E))){this.clearMedia();this.mediaObject=Ext.get(Ext.DomHelper.insertHtml(H||"afterbegin",E.dom,D));}}this.onAfterMedia(E);this.lastCt=E;},clearMedia:function(){if(Ext.isReady){Ext.destroy(this.mediaObject);}this.mediaObject=null;},getInterface:function(){return this.mediaObject?this.mediaObject.dom:null;},detectVersion:Ext.emptyFn});var B=function(){};Ext.apply(B.prototype,{hideMode:!Ext.isIE?"nosize":"display",animCollapse:false,visibilityCls:!Ext.isIE?"x-hide-nosize":null,autoScroll:true,shadow:false,bodyStyle:{position:"relative"},resizeMedia:function(D,C,E){var F=this.mediaCfg;if(F&&this.boxReady){if(arguments.length>3&&(!this.mediaObject||F.renderOnResize)){this.refreshMedia(this.body||this.el);}}},adjustVisibility:function(C){C=[].concat(C||[]);var D=Ext.Element;var E=this.visibilityCls||D[this.hideMode.toUpperCase()]||D.VISIBILITY;Ext.each(C,function(F){if(F){F.setVisibilityMode(E);}});if(this.loadMask){(this.loadMask=new Ext.LoadMask(this.bwrap||this.getEl(),Ext.apply({},this.loadMask))).removeMask=false;}this.on("resize",this.resizeMedia,this);},doAutoLoad:Ext.emptyFn,refreshMedia:function(C){if(this.mediaCfg){this.renderMedia(null,C);}},loadMask:false});Ext.ux.MediaComponent=Ext.extend(Ext.BoxComponent,{ctype:"Ext.ux.MediaComponent",autoEl:"div",cls:"x-media-comp",getId:function(){return this.id||(this.id="media-comp"+(++Ext.Component.AUTO_ID));},initComponent:function(){this.initMedia();Ext.ux.MediaComponent.superclass.initComponent.apply(this,arguments);},afterRender:function(){this.setAutoScroll();Ext.ux.MediaComponent.superclass.afterRender.apply(this,arguments);this.adjustVisibility(this.getEl());},beforeDestroy:function(){this.clearMedia();Ext.ux.MediaComponent.superclass.beforeDestroy.call(this);},setAutoScroll:function(){if(this.rendered&&this.autoScroll){this.getEl().setOverflow("auto");}}});Ext.apply(Ext.ux.MediaComponent.prototype,Ext.ux.Media.prototype);Ext.apply(Ext.ux.MediaComponent.prototype,B.prototype);Ext.reg("media",Ext.ux.MediaComponent);A.Panel=Ext.extend(Ext.Panel,{ctype:"Ext.ux.Media.Panel",cls:"x-media-panel",initComponent:function(){this.initMedia();delete this.html;this.contentEl=null;this.items=null;A.Panel.superclass.initComponent.call(this);},onRender:function(){A.Panel.superclass.onRender.apply(this,arguments);this.adjustVisibility([this[this.collapseEl],this.floating?null:this.getActionEl()]);},beforeDestroy:function(){this.clearMedia();A.Panel.superclass.beforeDestroy.call(this);}});Ext.apply(A.Panel.prototype,A.prototype);Ext.apply(A.Panel.prototype,B.prototype);Ext.reg("mediapanel",Ext.ux.MediaPanel=A.Panel);A.Window=Ext.extend(Ext.Window,{cls:"x-media-window",ctype:"Ext.ux.Media.Window",initComponent:function(){this.initMedia();delete this.html;this.contentEl=null;this.items=null;A.Window.superclass.initComponent.call(this);},onRender:function(){A.Window.superclass.onRender.apply(this,arguments);this.adjustVisibility([this[this.collapseEl]],this.floating?null:this.getActionEl());},beforeDestroy:function(){this.clearMedia();A.Window.superclass.beforeDestroy.call(this);}});Ext.apply(A.Window.prototype,A.prototype);Ext.apply(A.Window.prototype,B.prototype);Ext.ux.MediaWindow=A.Window;Ext.onReady(function(){var C=Ext.util.CSS,D=[];C.getRule(".x-media")||(D.push(".x-media{width:100%;height:100%;display:block;overflow:none;}"));C.getRule(".x-media-mask")||(D.push(".x-media-mask{position:absolute;top:0px;left:0px;background-color:transparent;width:auto;height:auto;zoom:1;}"));C.getRule(".x-hide-nosize .x-media")||(D.push(".x-hide-nosize,.x-hide-nosize .x-media {height:0!important;width:0!important;border:none!important;}"));if(!!D.length){C.createStyleSheet(D.join(""));}});Ext.apply(Ext.Element.prototype,{setVisible:function(F,C){if(!C||!Ext.lib.Anim){if(this.visibilityMode==Ext.Element.DISPLAY){this.setDisplayed(F);}else{if(this.visibilityMode==Ext.Element.VISIBILITY){this.fixDisplay();this.dom.style.visibility=F?"visible":"hidden";}else{this[F?"removeClass":"addClass"](String(this.visibilityMode));}}}else{var E=this.dom;var D=this.visibilityMode;if(F){this.setOpacity(0.01);this.setVisible(true);}this.anim({opacity:{to:(F?1:0)}},this.preanim(arguments,1),null,0.35,"easeIn",function(){if(!F){if(D==Ext.Element.DISPLAY){E.style.display="none";}else{if(D==Ext.Element.VISIBILITY){E.style.visibility="hidden";}else{Ext.get(E).addClass(String(D));}}Ext.get(E).setOpacity(1);}});}return this;},isVisible:function(C){var D=!(this.getStyle("visibility")=="hidden"||this.getStyle("display")=="none"||this.hasClass(this.visibilityMode));if(C!==true||!D){return D;}var E=this.dom.parentNode;while(E&&E.tagName.toLowerCase()!="body"){if(!Ext.fly(E,"_isVisible").isVisible()){return false;}E=E.parentNode;}return true;}});})();