Ext.ux.MediaBase=function(){};Ext.apply(Ext.ux.MediaBase.prototype,{_macros:null,applyMacros:function(B,C){var A=C||this._macros;return A?Ext.DomHelper.markup(B).replace(/(%40url|@url)/g,A.url).replace(/(%40start|@start)/g,(A.start||!!this.autoStart)+"").replace(/(%40controls|@controls)/g,A.controls+"").replace(/(%40id|@id)/g,A.id+"").replace(/(%40loop|@loop)/g,A.loop+"").replace(/(%40width|@width)/g,A.width+"").replace(/(%40height|@height)/g,A.height+""):B;},mediaMarkup:function(F){var A=F?Ext.apply({url:false},F):{};if(A&&A.unsupportedText&&typeof A.unsupportedText=="object"){A.unsupportedText=Ext.DomHelper.markup(A.unsupportedText);}var D=Ext.apply({type:false},this["_"+A.mediaType]||false);if(A.url&&D.type){var E=Ext.apply(D.params||{},A.params||{});for(var C in E){if(E.hasOwnProperty(C)){A.children||(A.children=[]);if(E[C]!==null){A.children.push({tag:"param",name:C,value:(typeof E[C]=="object"?Ext.urlEncode(E[C]):encodeURI(E[C]))});}}}delete D.params;D.style||(D.style={});D.style=Ext.apply({height:"@height",width:"@width"},A.style||{},D.style);if(A.unsupportedText){D.html=A.unsupportedText;}A=Ext.apply({tag:"object"},A,D);A.id||(A.id=Ext.id());var B=function(G,I,H){return Ext.value(Ext.value(G,I),H);};this._macros={url:A.url||"",height:A.height||"100%",width:A.width||"100%",controls:B(A.controls,false),start:B(A.start,false),loop:B(A.loop,false),id:A.id};delete A.url;delete A.mediaType;delete A.height;delete A.width;delete A.controls;delete A.start;delete A.loop;delete A.params;delete A.unsupportedText;return A;}else{return null;}},"_PDF":Ext.apply({tag:"object",cls:"x-media x-media-pdf",type:"application/pdf",data:"@url",params:{src:"@url"}},Ext.isIE?{classid:"CLSID:CA8A9780-280D-11CF-A24D-444553540000"}:false),"_WMV":Ext.apply({tag:"object",cls:"x-media x-media-wmv",type:"video/x-ms-wmv",data:"@url",params:{src:"@url",url:"@url",autostart:"@start",showcontrols:"@controls"}},Ext.isIE?{classid:"CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"}:false),"_SWF":Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",data:"@url",loop:true,start:true,params:{movie:"@url",menu:"@controls",play:"@start",quality:"high",bgcolor:"#FFFFFF",loop:"@loop"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}:false),"_JWP":Ext.apply({tag:"object",cls:"x-media x-media-swf x-media-flv",type:"application/x-shockwave-flash",data:"@url",loop:true,start:false,params:{movie:"@url",flashVars:{autostart:"@start",repeat:"@loop",height:"@height",width:"@width",id:"@id"}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}:false),"_MOV":Ext.apply({tag:"object",cls:"x-media x-media-mov",type:"video/quicktime",data:"@url",params:{src:"@url",autoplay:"@start",controller:"@controls"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start"}}:false),"_REAL":Ext.apply({tag:"object",cls:"x-media x-media-real",type:"audio/x-pn-realaudio",data:"@url",standby:"Loading Real Media Player components...",params:{src:"@url",autostart:"@start",controller:"@controls",loop:"@loop",console:"TES"}},Ext.isIE?{classid:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",controls:"All"}:false),"_SVG":{tag:"object",cls:"x-media x-media-img x-media-svg",type:"image/svg+xml",data:"@url"},"_GIF":{tag:"object",cls:"x-media x-media-img x-media-gif",type:"image/gif",data:"@url"},"_JPEG":{tag:"object",cls:"x-media x-media-img x-media-jpeg",type:"image/jpeg",data:"@url"},"_PNG":{tag:"object",cls:"x-media x-media-img x-media-png",type:"image/png",data:"@url"},"_HTM":{tag:"object",cls:"x-media x-media-html",type:"text/html",style:{overflow:"auto"},data:"@url"},"_TXT":{tag:"object",cls:"x-media x-media-text",type:"text/plain",style:{overflow:"auto"},data:"@url"},"_XLS":{tag:"object",cls:"x-media x-media-excel",type:"application/x-msexcel",data:"@url"},"_XML":{tag:"object",cls:"x-media x-media-xml",type:"text/xml",style:{overflow:"auto"},data:"@url"},"_QTMIDI":Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-midi",type:"audio/midi",style:{overflow:"auto"},data:"@url",params:{autostart:"@start"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start"}}:false),"_QTMP3":Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-mpeg",type:"audio/mpeg",data:"@url",params:{autostart:"@start"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start"}}:false),"_QTWAV":Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-wav",type:"audio/wav",data:"@url",params:{autostart:"@start"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab",type:"application/x-oleobject",params:{src:"@url",controller:"@controls",autostart:"@start"}}:false)});Ext.ux.MediaPanel=Ext.extend(Ext.Panel,Ext.apply({animCollapse:false,ctype:"Ext.ux.MediaPanel",initComponent:function(){this.bodyCfg||(this.bodyCfg={tag:"div",cls:this.baseCls+"-body",children:[]});this.autoLoad=false;var A;this.bodyCfg.children||(this.bodyCfg.children=[]);if(A=this.mediaMarkup(this.mediaCfg)){this.bodyCfg.children.push(A);}else{this.bodyCfg.html=this.mediaCfg?this.mediaCfg.unsupportedText||false:false;}Ext.ux.MediaPanel.superclass.initComponent.call(this);},onRender:function(B,A){if(this.bodyCfg){this.bodyCfg=this.applyMacros(this.bodyCfg);}Ext.ux.MediaPanel.superclass.onRender.call(this,B,A);Ext.each([this[this.collapseEl],this.el,this.body.child("x-media")],function(C){if(C){C.setVisibilityMode(Ext.Element[this.hideMode.toUpperCase()]||1).originalDisplay=(this.hideMode!="display"?"visible":"block");}},this);},renderMedia:function(B){B||(B=this.initialConfig.mediaCfg);var A;if(this.rendered&&(A=this.mediaMarkup(B))){this.body.update(this.applyMacros(A));}}},Ext.ux.MediaBase.prototype));Ext.reg("mediapanel",Ext.ux.MediaPanel);Ext.ux.MediaPanel.Flash=Ext.extend(Ext.ux.MediaPanel,{autoStart:false,requiredVersion:false,playerVersion:null,ctype:"Ext.ux.MediaPanel.Flash",SWFObject:null,varsName:"flashVars","_SWF":Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",data:"@url",loop:true,start:true,params:{movie:"@url",play:"@start",loop:"@loop",menu:"@controls",quality:"high",bgcolor:"#FFFFFF"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}:false),initComponent:function(){var F=Ext.apply({url:false},this.mediaCfg||{});if(F.url){this.requiredVersion=F.requiredVersion||false;var A=!!(this.playerVersion=this.detectVersion());var C=A&&(this.requiredVersion?this.assertVersion(this.requiredVersion):true);if(F.unsupportedText){if(typeof F.unsupportedText=="object"){F.unsupportedText=Ext.DomHelper.markup(F.unsupportedText);}F.unsupportedText=String.format(F.unsupportedText,F.requiredVersion,this.playerVersion||"Not installed");}if(!C){var B=A&&this.assertVersion("6.0.65");if(B&&F.installUrl){this.initialConfig.mediaCfg=F=F.installDescriptor||{tag:"object",cls:"x-media x-media-swf",id:"SWFInstaller",type:"application/x-shockwave-flash",data:"@url",url:F.installUrl,width:550,height:300,loop:false,start:true,unsupportedText:F.unsupportedText,params:{quality:"high",movie:"@url",allowScriptAcess:"always",align:"middle",bgcolor:"#3A6EA5",pluginspage:this.pluginsPage||"http://www.adobe.com/go/getflashplayer"}};F.params[this.varsName]="MMredirectURL="+(F.installRedirect||window.location)+"&MMplayerType="+(Ext.isIE?"ActiveX":"Plugin")+"&MMdoctitle="+(document.title=document.title.slice(0,47)+" - Flash Player Installation");}else{F.url=null;}}if(F.eventSynch){F.params||(F.params={});var E=F.params[this.varsName]||(F.params[this.varsName]={});if(typeof E=="string"){E=Ext.urlDecode(E,true);}var D=(F.eventSynch===true?{allowedDomain:E.allowedDomain||document.location.hostname,elementID:F.id||(F.id=Ext.id()),eventHandler:"Ext.ux.MediaPanel.Flash.eventSynch"}:F.eventSynch);Ext.apply(F.params,{allowScriptAccess:"always"})[this.varsName]=Ext.applyIf(E,D);}delete F.requiredVersion;delete F.installUrl;delete F.installRedirect;delete F.installDescriptor;delete F.eventSynch;}F.mediaType="SWF";this.mediaCfg=this.initialConfig.mediaCfg=F;Ext.ux.MediaPanel.Flash.superclass.initComponent.call(this);},onRender:function(B,A){Ext.ux.MediaPanel.Flash.superclass.onRender.call(this,B,A);this._setSWFObject.defer(20,this);},renderMedia:function(A){this._applyFixes();this.SWFObject=null;Ext.ux.MediaPanel.Flash.superclass.renderMedia.call(this,A);this._setSWFObject.defer(20,this);},_setSWFObject:function(){if(this.SWFObject=Ext.get(this.body.child("object.x-media-swf"))){this.SWFObject.owner=this;this.SWFObject.setVisibilityMode(Ext.Element[this.hideMode.toUpperCase()]||1).originalDisplay=(this.hideMode!="display"?"visible":"block");}},assertVersion:function(C){var B;C||(C=[]);if(C instanceof Array){B=C;}else{B=String(C).split(".");}B=(B.concat([0,0,0,0])).slice(0,3);var A;if(!(A=this.playerVersion||(this.playerVersion=this.detectVersion()))){return false;}if(A.major>parseFloat(B[0])){return true;}else{if(A.major==parseFloat(B[0])){if(A.minor>parseFloat(B[1])){return true;}else{if(A.minor==parseFloat(B[1])){if(A.rev>=parseFloat(B[2])){return true;}}}}}return false;},detectVersion:function(){var A=false;var B=function(E){return E&&!!E.length?{major:E[0]!=null?parseInt(E[0],10):0,minor:E[1]!=null?parseInt(E[1],10):0,rev:E[2]!=null?parseInt(E[2],10):0,toString:function(){return this.major+"."+this.minor+"."+this.rev;}}:false;};if(Ext.isIE){var C=null;try{C=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(D){try{C=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");A=[6,0,21];C.AllowScriptAccess="always";}catch(D){if(A&&A[0]==6){return B(A);}}try{C=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(D){}}if(C){A=C.GetVariable("$version").split(" ")[1].split(",");}}else{if(navigator.plugins&&navigator.mimeTypes.length){var C=navigator.plugins["Shockwave Flash"];if(C&&C.description){A=C.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");}}}return B(A);},_applyFixes:function(){if(this.rendered&&Ext.isIE&&this.SWFObject){this.playerVersion||(this.playerVersion=this.detectVersion());if(this.playerVersion&&this.playerVersion.major>7){var B=this.SWFObject.dom;B.style.display="none";for(var A in B){if(typeof B[A]=="function"){B[A]=Ext.emptyFn;}}}}},beforeDestroy:function(){this._applyFixes();Ext.ux.MediaPanel.Flash.superclass.beforeDestroy.call(this);},call:function(fn){var SWF;if(SWF=this.getSWFObject()){var result=SWF.CallFunction('<invoke name="'+fn+'" returntype="javascript">'+__flash__argumentsToXML(arguments,1)+"</invoke>");return eval(result);}return undefined;},getSWFObject:function(){return this.rendered?this.SWFObject.dom||null:null;},_handleSWFEvent:function(A,C){var B=C.type||false;if(B){return this.fireEvent(B,this,A,C);}},onShow:function(){if(this.SWFObject){this.SWFObject.setVisible(true);}Ext.ux.MediaPanel.Flash.superclass.onShow.call(this);},onHide:function(){if(this.SWFObject){this.SWFObject.setVisible(false);}Ext.ux.MediaPanel.Flash.superclass.onHide.call(this);}});Ext.ux.MediaPanel.Flash.eventSynch=function(A,C){var B=Ext.get(A);if(B&&B.owner){return B.owner._handleSWFEvent.call(B.owner,B.dom,C);}};Ext.reg("flashpanel",Ext.ux.MediaPanel.Flash);