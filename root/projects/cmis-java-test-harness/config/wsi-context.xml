<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

   <import resource="classpath:cmis-context.xml" />

   <bean id="wsi.properties"
      class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
      <property name="location">
         <value>classpath:wsi.properties</value>
      </property>
   </bean>

   <bean id="profiler" class="org.alfresco.cmis.test.ws.wsi.Profiler">
      <property name="monitorConfig">
         <ref local="monitorConfig" />
      </property>

      <property name="analyzerConfig">
         <ref local="analyzerConfig" />
      </property>

      <property name="clientList">
         <list>
            <ref bean="originalDictionaryServiceClient" />
            <ref bean="originalContentServiceClient" />
            <ref bean="originalAccessControlServiceClient" />
            <ref bean="originalAuthenticationServiceClient" />
            <ref bean="originalRepositoryServiceClient" />
            <ref bean="originalActionServiceClient" />
            <ref bean="originalAuthoringServiceClient" />
            <ref bean="originalAdministrationServiceClient" />
            <ref bean="originalClassificationServiceClient" />

            <ref bean="cmisRepositoryServiceClient" />
            <ref bean="cmisDiscoveryServiceClient" />
            <ref bean="cmisMultiFilingServiceClient" />
            <ref bean="cmisVersioningServiceClient" />
            <ref bean="cmisObjectServiceClient" />
            <ref bean="cmisNavigationServiceClient" />
         </list>
      </property>

      <property name="tadResources" value="classpath:profiles/*.xml" />
      <property name="xslResources">
         <list>
            <value>classpath:xsl/report.xsl</value>
            <value>classpath:xsl/common.xsl</value>
         </list>
      </property>
      <property name="reportLocation" value="${wsi.reports.location}" />
   </bean>

   <!--
      =====================================================================
      ========================== Monitor's configuration ==================
      =====================================================================
   -->

   <!-- Monitor configuration -->
   <bean id="monitorConfig" class="org.wsi.test.monitor.config.impl.MonitorConfigImpl">
      <property name="manInTheMiddle" ref="manInTheMiddle" />

      <property name="replaceLog" value="true" />
      <property name="timeout" value="3" />
      <property name="logDuration" value="600" />

      <property name="addStyleSheet" ref="addStyleSheet" />
      <property name="verboseOption" value="false" />
      <!-- LOG FILE LOCATION CONFIGURES WITH TEMP FOLDER -->
   </bean>

   <bean id="manInTheMiddle" class="org.wsi.test.monitor.config.impl.ManInTheMiddleImpl">
      <property name="redirectList">
         <ref local="redirectList" />
      </property>
   </bean>

   <bean id="redirectList" class="java.util.Vector">
      <constructor-arg>
         <list>
            <bean class="org.wsi.test.monitor.config.impl.RedirectImpl">
               <property name="maxConnections" value="1000" />
               <property name="readTimeoutSeconds" value="15" />
               <property name="host"
                  value="${wsi.server.host}:${wsi.server.port}" />
               <property name="listenPort" value="${wsi.proxy.port}" />
            </bean>
         </list>
      </constructor-arg>
   </bean>

   <bean id="addStyleSheet" class="org.wsi.test.common.impl.AddStyleSheetImpl">
      <property name="type" value="text/xsl" />
      <property name="href" value="monitorConfig.xsl" />
   </bean>

   <!--
      =====================================================================
      ========================== Analyzer's configuration =================
      =====================================================================
   -->

   <bean id="analyzerConfig" class="org.wsi.test.analyzer.config.impl.AnalyzerConfigImpl">
      <property name="addStyleSheet" ref="reportStyleSheets" />
      <property name="assertionResultsOption" ref="assertionsResult" />

      <property name="replaceReport" value="true" />
      <property name="correlationType" value="endpoint" />
      <property name="verboseOption" value="false" />
      <!-- TADS WILL BE STORED AT CLASSPATH FOLDER -->
      <!-- LOG FILE LOCATION CONFIGURES WITH TEMP FOLDER -->
      <!-- SERVICE TEST CLIENT FULLY CONFIGURES WSDL REFERENCE -->

      <!--
         USER'S CONFIGURATION. REPORTS STORAGE LOCATION MUST BE SETTED
         MANUALLY
      -->
   </bean>

   <bean id="reportStyleSheets" class="org.wsi.test.common.impl.AddStyleSheetImpl">
      <property name="type" value="text/xsl" />
      <property name="href" value="report.xsl" />
   </bean>

   <bean id="assertionsResult"
      class="org.wsi.test.analyzer.config.impl.AssertionResultsOptionImpl">
      <property name="assertionResultType">
         <bean class="org.wsi.test.analyzer.config.AssertionResultType"
            factory-method="newInstance">
            <constructor-arg value="all" />
         </bean>
      </property>

      <property name="showMessageEntry" value="true" />
      <property name="showFailureMessage" value="true" />
   </bean>

</beans>
