<project name="WS-Binding" default="main" basedir=".">

    <property file="${user.name}.build.properties" />
    <property file="build.properties" />

    <property name="src.dir" value="${basedir}/source" />
    <property name="src.java" value="${src.dir}/java" />
    <property name="src.wsdl" value="${src.dir}/wsdl" />
    <property name="src.generated" value="${src.dir}/generated" />
    <property name="build.dir" value="${basedir}/build" />
    <property name="build.classes" value="${build.dir}/classes" />
    <property name="lib" value="${lib}" />

    <path id="classpath.lib">
        <fileset dir="${lib}">
            <include name="**/*.jar" />
        </fileset>
    </path>

    <target name="main" depends="undeploy, deploy" />

    <target name="undeploy">
        <delete failonerror="no" includeemptydirs="true">
            <fileset dir="${alfresco.home}/tomcat/webapps/alfresco/WEB-INF/classes/org/alfresco/">
                <include name="**/*.*" />
            </fileset>
        </delete>
    </target>

    <target name="deploy">
        <copy todir="${alfresco.home}/tomcat/webapps/alfresco/WEB-INF/classes" overwrite="true">
            <fileset dir="${build.classes}">
                <include name="**/*.*" />
                <exclude name="**/*Test.*" />
                <exclude name="**/extension/*.*" />
            </fileset>
        </copy>
    </target>

    <target name="wsdl2java">
        <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="yes" maxmemory="256m">
            <classpath refid="classpath.lib" />

            <arg value="-noAddressBinding" />
            <arg value="-d" />
            <arg value="/Users/davidc/Dev/projects/cmis063/code/root/projects/remote-api/source/generated" />
            <arg value="-p" />
            <arg value="org.alfresco.repo.cmis.ws" />

            <arg value="CMISWS-Service.wsdl" />
        </java>
    </target>

</project>