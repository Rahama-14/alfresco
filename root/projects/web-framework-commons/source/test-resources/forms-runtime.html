<html>
   <head>
      <title>Metadata Example</title>
      
      <link rel="stylesheet" type="text/css" href="../../build/assemble/yui/calendar/assets/calendar.css" />
      
      <!-- load required libraries -->
      <!--<script type="text/javascript" src="../../build/assemble/yui/utilities/utilities.js"></script>-->
      
      <script type="text/javascript" src="../../build/assemble/yui/yahoo/yahoo-debug.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/event/event-debug.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/dom/dom-debug.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/element/element-beta-debug.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/get/get-debug.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/yuiloader/yuiloader-beta-debug.js"></script>
      
      <script type="text/javascript" src="../../build/assemble/yui/button/button-min.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/container/container_core-min.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/yahoo/menu-min.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/selector/selector-beta-min.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/yahoo-dom-event/yahoo-dom-event.js"></script>
      <script type="text/javascript" src="../../build/assemble/yui/calendar/calendar-min.js"></script>
      
      <script type="text/javascript" src="../web/js/alfresco.js"></script>
      <script type="text/javascript" src="../web/js/forms-runtime.js"></script>
      
      <style>
         .errors
         {
            color: red;
            border: 1px dashed #dedede;
            padding: 4px;
            margin-bottom: 10px;
            display: none;
         }
      </style>
   </head>
   
   <body>
      <h3>Registration Example</h3>
      
      <div id="form-errors" class="errors">
      </div>
      
      <form id="regform" action="http://localhost:8081/slingshot/service/components/metadata" 
            method="post" enctype="application/json" accept-charset="utf-8">
         <fieldset>
            <legend>Login details</legend>
            <label for="username">Username</label>
            <input id="username" name="username" type="text" size="40" />
            <br />
      
            <label for="pwd">Password</label>
            <input id="pwd" name="pwd" type="password" size="40" />
            <br />
      
            <label for="email">Email Address</label>
            <input id="email" name="email" type="text" size="40" />
         </fieldset>
         
         <br/>
         
         <fieldset>
            <legend>Personal information</legend>
            <label for="name">Name</label>
            <input id="name" name="name" type="text" size="40" />
            <br />
            
            <label for="age">Age</label>
            <input id="age" type="text" name="age" size="5" />
            <br />
            
            <!-- <input id="age" type="hidden" name="age" /> -->
            <!-- <div id="calendar"></div> -->
      
            <label for="gender">Gender</label>
            <input id="gender" name="gender" type="radio" value="male" /><label>Male</label>
            <input id="gender" name="gender" type="radio" value="female" /><label>Female</label>
            <br />
      
            <label for="country">Country</label>
            <select id="country" name="country" size="5" multiple="true">
               <option value="">Please select...</option>
               <option value="france">France</option>
               <option value="germany">Germany</option>
               <option value="">Separator...</option>
               <option value="spain">Spain</option>
               <option value="uk">United Kingdom</option>
               <option value="us">United States</option>
            </select>
            <br />
      
            <label for="interests">Interests</label>
            <input id="interests" name="interests" type="text" size="40" />
         </fieldset>
      
         <br/>
         
         <input id="regsubmit" type="submit" value="Submit" />
         <input value="Clear" type="reset" />
      </form>
      
      <h3>Address Example</h3>
      
      <form id="addressform" action="http://localhost:8081/slingshot/service/components/metadata" 
            method="post" enctype="multipart/form-data" accept-charset="utf-8">
         <fieldset>
            <legend>Address</legend>
            <label for="housenumber">House Number</label>
            <input id="housenumber" name="housenumber" type="text" size="6" />
            <br />
      
            <label for="street">Street</label>
            <input id="street" name="street" type="text" size="40" />
            <br />
            
            <label for="town">Town</label>
            <input id="town" name="town" type="text" size="40" />
            <br />
            
            <label for="county">County</label>
            <input id="county" name="county" type="text" size="40" />
            <br />
         </fieldset>
         
         <br/>
         
         <input id="addrsubmit" type="submit" value="Set Address" />
         <input value="Clear" type="reset" />
      </form>
      
      <script type="text/javascript">
         function updateDate(type, args, obj)
         {
            var dates = args[0]; 
            var date = dates[0]; 
            var year = date[0], month = date[1], day = date[2];
            
            var age = document.getElementById("age"); 
            age.value = day + "/" + month + "/" + year;
         }
       
         // setup calendar
         //var cal1 = new YAHOO.widget.Calendar("cal1", "calendar");
         //cal1.selectEvent.subscribe(updateDate, cal1, true);
         //cal1.render(); 
         
         // setup registration form   
         var regform = new Alfresco.forms.Form("regform");
         regform.addValidation("username", Alfresco.forms.validation.length, {min: 3, max: 10}, "blur");
         regform.addValidation("age", Alfresco.forms.validation.mandatory);
         regform.addValidation("age", Alfresco.forms.validation.numberRange, {min: 18}, "blur");
         regform.addValidation("country", Alfresco.forms.validation.mandatory);
         regform.addValidation("gender", Alfresco.forms.validation.mandatory);
         regform.addValidation("email", Alfresco.forms.validation.email, null, "blur");
         //regform.setValidateOnSubmit(false);
         regform.setErrorContainer("form-errors");
         //regform.setValidateAllOnSubmit(true);
         regform.setAJAXSubmit(true);
         regform.setSubmitAsJSON(true);
         regform.init();

         // setup address form   
         var addrform = new Alfresco.forms.Form("addressform");
         addrform.addValidation("housenumber", Alfresco.forms.validation.mandatory, null, "keyup");
         addrform.addValidation("street", Alfresco.forms.validation.mandatory, null, "keyup");
         addrform.addValidation("housenumber", Alfresco.forms.validation.number, null, "keyup");
         addrform.setShowSubmitStateDynamically(true, true);
         addrform.setErrorContainer("form-errors");
         addrform.init();
      </script>
      
   </body>
</html>

