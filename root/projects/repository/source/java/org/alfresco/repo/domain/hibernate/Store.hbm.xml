<?xml version='1.0' encoding='UTF-8'?>

<!DOCTYPE hibernate-mapping PUBLIC
    '-//Hibernate/Hibernate Mapping DTD 3.0//EN' 
    'http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd'>

<hibernate-mapping>

   <class
         name="org.alfresco.repo.domain.hibernate.StoreImpl"
         proxy="org.alfresco.repo.domain.Store"
         table="alf_store"
         dynamic-update="false"
         dynamic-insert="false"
         select-before-update="false"
         optimistic-lock="version" >
      <!-- composite PK -->
      <composite-id name="key" class="org.alfresco.repo.domain.StoreKey">
         <key-property name="protocol" length="50" />
         <key-property name="identifier" length="100" />
      </composite-id>
      <!-- Optimistic locking -->
      <version column="version" name="version" type="long" />
      <!-- forward assoc to root node -->
      <many-to-one
            name="rootNode"
            not-null="false"
            foreign-key="fk_alf_store_rn"
            lazy="proxy"
            class="org.alfresco.repo.domain.hibernate.NodeImpl"
            fetch="select" >
         <column name="root_node_id" />
      </many-to-one>
   </class>
   
</hibernate-mapping>
