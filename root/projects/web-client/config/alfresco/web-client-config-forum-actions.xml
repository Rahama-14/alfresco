<alfresco-config>

   <config evaluator="string-compare" condition="Actions">
      <actions>
         
         <!-- Forums overrides the checkin document action - as it has more complex evaluation
              logic which takes into account any child forums attached to the node. -->
         <!-- Checkin document -->
         <action id="checkin_doc">
            <evaluator>org.alfresco.web.action.evaluator.ForumsCheckinDocEvaluator</evaluator>
            <label-id>checkin</label-id>
            <image>/images/icons/CheckIn_icon.gif</image>
            <action-listener>#{CheckinCheckoutBean.setupContentAction}</action-listener>
            <action>checkinFile</action>
            <params>
               <param name="id">#{actionContext.id}</param>
            </params>
         </action>
         
         <!-- Discuss document or space e.g. jump to Forums view for this node -->
         <action id="discuss_node">
            <evaluator>org.alfresco.web.action.evaluator.DiscussNodeEvaluator</evaluator>
            <label-id>discuss</label-id>
            <image>/images/icons/forum-16.gif</image>
            <action-listener>#{ForumsBean.discuss}</action-listener>
            <params>
               <param name="id">#{actionContext.id}</param>
            </params>
         </action>
         
         <!-- Discuss document or space e.g. jump to Forums view for this node -->
         <action id="create_forum_node">
            <permissions>
               <permission allow="true">CreateChildren</permission>
            </permissions>
            <evaluator>org.alfresco.web.action.evaluator.CreateForumNodeEvaluator</evaluator>
            <label-id>start_discussion</label-id>
            <image>/images/icons/create_forum.gif</image>
            <action-listener>#{CreateDiscussionDialog.startWizard}</action-listener>
            <params>
               <param name="id">#{actionContext.id}</param>
            </params>
         </action>
         
         
         <!-- the 'actions' elements define unique blocks of actions that reference the actions
              as defined above and can override or supply display elements for the group of actions -->
         <!-- the component is responsible for making the context Node object available with name
              of 'actionContext' so the actions can access it directly to get properties -->
         
         <!-- Override browse actions and doc/space details screen actions for the Forums module -->
         <!-- Actions for a document in the Browse screen -->
         <action-group id="document_browse">
            <show-link>false</show-link>
            <style-class>inlineAction</style-class>
            
            <action idref="edit_doc_http" />
            <action idref="edit_doc_webdav" />
            <action idref="edit_doc_cifs" />
            <action idref="checkout_doc" />
            <action idref="checkin_doc" />
            <action idref="discuss_node" />
            <action idref="details_doc" />
            <action idref="preview_doc" />
            
         </action-group>
         
         <!-- Actions Menu for a document in the Browse screen -->
         <action-group id="document_browse_menu">
            <action idref="delete_doc" />
            <action idref="update_doc" />
            <action idref="cancelcheckout_doc" />
            <action idref="approve_doc" />
            <action idref="reject_doc" />
            <action idref="cut_node" />
            <action idref="copy_node" />
            <action idref="create_forum_node" />
         </action-group>
         
         <!-- Actions for a space in the Browse screen -->
         <action-group id="space_browse">
            <show-link>false</show-link>
            <style-class>inlineAction</style-class>
            
            <action idref="preview_space" />
            <action idref="discuss_node" />
            <action idref="cut_node" />
            <action idref="copy_node" />
            <action idref="details_space" />
         </action-group>
         
         <!-- Actions Menu for a space in the Browse screen -->
         <action-group id="space_browse_menu">
            <action idref="delete_space" />
            <action idref="create_forum_node" />
         </action-group>
         
         <!-- Actions Menu for Document Details screen -->
         <action-group id="doc_details_actions">
            <action idref="checkout_doc" />
            <action idref="checkin_doc" />
            <action idref="cancelcheckout_doc" />
            <action idref="approve_doc_details" />
            <action idref="reject_doc_details" />
            <action idref="edit_doc_http" />
            <!-- TODO: add these once the appropriate props (webdavUrl and cifsPath) are added
                       to the node bean as resolvers (probably need to change valuebindings also)
            <action idref="edit_doc_webdav" />
            <action idref="edit_doc_cifs" />
            -->
            <action idref="update_doc" />
            <action idref="cut_node" />
            <action idref="copy_node" />
            <action idref="delete_doc" />
            <action idref="take_ownership_doc" />
            <action idref="manage_content_users" />
            <action idref="create_shortcut" />
            <action idref="discuss_node" />
            <action idref="create_forum_node" />
            <action idref="preview_doc" />
            <action idref="run_action" />
         </action-group>
         
         <!-- Actions Menu for Space Details screen -->
         <action-group id="space_details_actions">
            <action idref="cut_node" />
            <action idref="copy_node" />
            <action idref="delete_space" />
            <action idref="import_space" />
            <action idref="export_space" />
            <action idref="create_shortcut" />
            <action idref="take_ownership_space" />
            <action idref="manage_space_rules" />
            <action idref="discuss_node" />
            <action idref="create_forum_node" />
            <action idref="preview_space" />
         </action-group>
         
         <!-- Actions Menu for Forums Details page -->
         <action-group id="forums_details_actions">
            <action idref="cut_node" />
            <action idref="copy_node" />
            <action idref="delete_space" />
         </action-group>
         
         <!-- Actions Menu for Forum Details page -->
         <action-group id="forum_details_actions">
            <action idref="cut_node" />
            <action idref="copy_node" />
            <action idref="delete_space" />
         </action-group>
         
         <!-- Actions Menu for Topic Details page -->
         <action-group id="topic_details_actions">
            <action idref="cut_node" />
            <action idref="copy_node" />
            <action idref="delete_space" />
         </action-group>
         
      </actions>
   </config>

</alfresco-config>
