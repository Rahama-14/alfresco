<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>

   <!--
      LocalStore definitions sample file
      
      Enabling this file will empower Web Framework to pick up Surf
      objects from LocalStore instances.  These local store instances
      point to locations on disk outside of the classpath.
      
      This is intended mostly for use with production instances of 
      Alfresco Surf where objects are deployed via Alfresco WCM to
      locations on local disk.
   -->
   
   <!-- Local Store Abstract  -->   
   <bean id="webframework.localstore" class="org.alfresco.web.scripts.LocalFileSystemStore" abstract="true" init-method="init">
      <property name="root">
         <value>/surf/ROOT/WEB-INF/classes</value>
      </property>
   </bean>
   
   <!-- Web Scripts: Local Store -->
   <bean id="webframework.localstore.webscripts" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-webscripts</value></property>
   </bean>   
   
   <!-- Web Scripts Search Path -->
   <bean id="webframework.searchpath" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <ref bean="webframework.localstore.webscripts" />
            <ref bean="webframework.store.webscripts.custom" />
            <ref bean="webframework.store.webscripts" />
            <ref bean="webscripts.store" />
         </list>
      </property>
   </bean>
   
   <!-- Templates: Local Store -->
   <bean id="webframework.localstore.templates" parent="webframework.localstore">
      <property name="path"><value>alfresco/templates</value></property>
   </bean>      
   
   <!-- Templates Search Path -->
   <bean id="webframework.templates.searchpath" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <ref bean="webframework.localstore.templates" />
            <ref bean="webframework.localstore.webscripts" />
            <ref bean="webframework.store.templates.custom" />
            <ref bean="webframework.store.webscripts.custom" />
            <ref bean="webframework.store.templates" />
            <ref bean="webframework.store.webscripts" />
            <ref bean="webframework.store.system-templates" />
         </list>
      </property>
   </bean>
   
   <!-- Model Object: Chrome -->
   <bean id="webframework.localstore.chrome" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/chrome</value></property>
   </bean>
   <bean id="webframework.searchpath.chrome" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.chrome" /> -->
            <ref bean="webframework.localstore.chrome" />
            <ref bean="webframework.classpathstore.chrome.custom" />
            <ref bean="webframework.classpathstore.chrome" />
         </list>
      </property>
   </bean>
	
   <!-- Model Object: Component -->
   <bean id="webframework.localstore.component" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/components</value></property>
   </bean>
   <bean id="webframework.searchpath.component" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.component" /> -->
            <ref bean="webframework.localstore.component" />
            <ref bean="webframework.classpathstore.component.custom" />
			<ref bean="webframework.classpathstore.component" />
         </list>
      </property>
   </bean>

   <!-- Model Object: Component Type -->
   <bean id="webframework.localstore.componenttype" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/component-types</value></property>
   </bean>
   <bean id="webframework.searchpath.componenttype" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.componenttype" /> -->
            <ref bean="webframework.localstore.componenttype" />
            <ref bean="webframework.classpathstore.componenttype.custom" />
			<ref bean="webframework.classpathstore.componenttype" />
         </list>
      </property>
   </bean>
	  	  
   <!-- Model Object: Configuration -->
   <bean id="webframework.localstore.configuration" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/configurations</value></property>
   </bean>
   <bean id="webframework.searchpath.configuration" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.configuration" /> -->
            <ref bean="webframework.localstore.configuration" />
            <ref bean="webframework.classpathstore.configuration.custom" />
			<ref bean="webframework.classpathstore.configuration" />
         </list>
      </property>
   </bean>

   <!-- Model Object: Content Association -->
   <bean id="webframework.localstore.contentassociation" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/content-associations</value></property>
   </bean>
   <bean id="webframework.searchpath.contentassociation" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.contentassociation" /> -->
            <ref bean="webframework.localstore.contentassociation" />
         	<ref bean="webframework.classpathstore.contentassociation.custom" />
			<ref bean="webframework.classpathstore.contentassociation" />
         </list>
      </property>
   </bean>
   
   <!-- Model Object: Page -->
   <bean id="webframework.localstore.page" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/pages</value></property>
   </bean>
   <bean id="webframework.searchpath.page" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.page" /> -->
            <ref bean="webframework.localstore.page" />
            <ref bean="webframework.classpathstore.page.custom" />
			<ref bean="webframework.classpathstore.page" />
         </list>
      </property>
   </bean>

   <!-- Model Object: Page Association -->
   <bean id="webframework.localstore.pageassociation" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/page-associations</value></property>
   </bean>
   <bean id="webframework.searchpath.pageassociation" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.pageassociation" /> -->
            <ref bean="webframework.localstore.pageassociation" />
			<ref bean="webframework.classpathstore.pageassociation.custom" />
			<ref bean="webframework.classpathstore.pageassociation" />
         </list>
      </property>
   </bean>

   <!-- Model Object: Page Type -->
   <bean id="webframework.localstore.pagetype" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/page-types</value></property>
   </bean>
   <bean id="webframework.searchpath.pagetype" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.pagetype" /> -->
            <ref bean="webframework.localstore.pagetype" />
            <ref bean="webframework.classpathstore.pagetype.custom" />
			<ref bean="webframework.classpathstore.pagetype" />
         </list>
      </property>
   </bean>

   <!-- Model Object: Template Instance -->
   <bean id="webframework.localstore.templateinstance" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/template-instances</value></property>
   </bean>
   <bean id="webframework.searchpath.templateinstance" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.templateinstance" /> -->
            <ref bean="webframework.localstore.templateinstance" />
            <ref bean="webframework.classpathstore.templateinstance.custom" />
			<ref bean="webframework.classpathstore.templateinstance" />
         </list>
      </property>
   </bean>

   <!-- Template Type -->
   <bean id="webframework.localstore.templatetype" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/template-types</value></property>
   </bean>
   <bean id="webframework.searchpath.templatetype" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.templatetype" /> -->
            <ref bean="webframework.localstore.templatetype" />
            <ref bean="webframework.classpathstore.templatetype.custom" />
			<ref bean="webframework.classpathstore.templatetype" />
         </list>
      </property>
   </bean>

   <!-- Themes -->
   <bean id="webframework.localstore.theme" parent="webframework.localstore">
      <property name="path"><value>alfresco/site-data/themes</value></property>
   </bean>
   <bean id="webframework.searchpath.theme" class="org.alfresco.web.scripts.SearchPath">
      <property name="searchPath">
         <list>
            <!-- <ref bean="webframework.remotestore.theme" /> -->
            <ref bean="webframework.localstore.theme" />
            <ref bean="webframework.classpathstore.theme.custom" />
            <ref bean="webframework.classpathstore.theme" />
         </list>
      </property>
   </bean>

	<!-- Tell the webscripts template processor not to cache -->
	<bean id="webframework.webscripts.templateprocessor" class="org.alfresco.web.scripts.PresentationTemplateProcessor">
		<property name="searchPath" ref="webframework.searchpath" />
		<property name="updateDelay"><value>0</value></property>
		<property name="defaultEncoding"><value>UTF-8</value></property>
	</bean>
	
	<!-- Tell the template processor not to cache -->
	<bean id="webframework.templateprocessor" class="org.alfresco.web.scripts.PresentationTemplateProcessor">
		<property name="searchPath" ref="webframework.templates.searchpath" />
		<property name="defaultEncoding"><value>UTF-8</value></property>
		<property name="updateDelay"><value>0</value></property>
	</bean>

</beans>