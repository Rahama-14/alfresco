<?xml version="1.0" encoding="UTF-8"?>

<!-- Definition of Records Management Model -->

<!-- Note: the rma: namespace is defined further on in the document -->
<model name="rma:recordsmanagement" xmlns="http://www.alfresco.org/model/dictionary/1.0">

   <!-- Meta-data about the model -->
   <description>Records Management Model</description>
   <author>Roy Wetherall</author>
   <version>1.0</version>

   <!-- Imports are required to allow references to definitions in other models -->
   <imports>
      <!-- Import Alfresco Dictionary Definitions -->
      <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d"/>
      <!-- Import Alfresco Content Domain Model Definitions -->
      <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm"/>
      <!-- Import Alfresco Content Domain Model Definitions -->
      <import uri="http://www.alfresco.org/model/system/1.0" prefix="sys" />
   </imports>

   <!-- Records Management Namespace -->
   <namespaces>
      <namespace uri="http://www.alfresco.org/model/recordsmanagement/1.0" prefix="rma"/>
   </namespaces>

   <constraints>
   
      <!-- Pre-defined caveat (Supplemental Markings List) -->
      
      <!-- TODO - remove the list of allowed values (test example only) prior to release and fix-up associated unit tests-->
      <constraint name="rma:smList" type="org.alfresco.module.org_alfresco_module_dod5015.caveat.RMListOfValuesConstraint">
         <parameter name="allowedValues">
            <list>
               <value>NOFORN</value>      <!-- Not Releasable to Foreign Nationals/Governments/Non-US Citizens -->
               <value>NOCONTRACT</value>  <!-- Not Releasable to Contractors or Contractor/Consultants -->
               <value>FOUO</value>        <!-- For Official Use Only -->
            </list>
         </parameter>
         <parameter name="caseSensitive"><value>true</value></parameter>
      </constraint>
      
      <!--  User-defined caveats (if any) -->
      
      <!-- TODO - remove this constraint (test example only) prior to release and fix-up associated unit tests -->
      <constraint name="rma:prjList" type="org.alfresco.module.org_alfresco_module_dod5015.caveat.RMListOfValuesConstraint">
         <parameter name="allowedValues">
            <list>
               <value>Project A</value>
               <value>Project B</value>
               <value>Project C</value>
            </list>
         </parameter>
         <parameter name="caseSensitive"><value>true</value></parameter>
      </constraint>
      
   </constraints>
   
   <types>
      
      <!-- Caveat config - allowed values for users/groups for supplemental markings and/or user-defined fields -->
      <type name="rma:caveatConfig">
         <title>Caveat Config</title>
         <parent>cm:content</parent>
      </type>
      
      <!-- Records management container type -->      
      <type name="rma:recordsManagementContainer">
         <title>Records Managment Container</title>
         <parent>cm:folder</parent>
         
         <mandatory-aspects>
            <aspect>cm:titled</aspect>
            <aspect>rma:recordComponentIdentifier</aspect>
         </mandatory-aspects>

      </type> 
      
      <type name="rma:dispositionDefinition">
        <title>Disposition Definition</title>        
        <parent>cm:cmobject</parent>
        
        <properties>
                        
            <property name="rma:dispositionAuthority">
               <title>Disposition Authority</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            
            <property name="rma:dispositionInstructions">
               <title>Disposition Instructions</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            
            <property name="rma:recordLevelDisposition">
               <title>Record Level Disposition</title>
               <type>d:boolean</type>
               <mandatory>true</mandatory>
               <default>false</default>
            </property>
    
         </properties>
         
         <associations>
            
            <child-association name="rma:dispositionActions">
                <title>Disposition Actions</title>
                <source>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </source>
                <target>
                    <class>rma:dispositionAction</class>
                    <mandatory>false</mandatory>
                    <many>true</many>
                </target>
            </child-association>
         
         </associations>

      </type>
            
      <type name="rma:dispositionAction">
         
         <title>Disposition Action</title>
         <parent>cm:cmobject</parent>
         
         <properties>
            
            <property name="rma:dispositionActionName">
               <title>Disposition Action Name</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            
            <property name="rma:dispositionDescription">
                <title>Disposition Description</title>
                <type>d:text</type>
                <mandatory>false</mandatory>
            </property>
            
            <property name="rma:dispositionPeriod">
               <title>Disposition Period</title>
               <type>d:period</type>
               <mandatory>false</mandatory>
               <default>none|0</default>
            </property> 
            
            <property name="rma:dispositionPeriodProperty">
               <title>Disposition Period Property</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
            </property>       
                                   
            <!-- This contains one of a prepaired list of available events -->                       
            <property name="rma:dispositionEvent">
               <title>Disposition Event</title>
               <type>d:text</type>               
               <multiple>true</multiple>              
            </property>

            <property name="rma:dispositionEventCombination">
               <title>Disposition Event Combination</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
               <default>or</default>
            </property>
            
         </properties>       
      
      </type>
      
      <type name="rma:recordFolder">
         
         <title>Record Folder</title>
         <parent>cm:folder</parent>
         
         <properties>
                    
            <!-- cm:name used for the Folder Identifier -->
            <!-- cm:title used for the Folder Name -->                                      
                                                     
            <property name="rma:isClosed">
               <title>Record Folder Closed</title>
               <description>Indicates whether the folder is closed</description>
               <type>d:boolean</type>
               <protected>true</protected>
               <mandatory>true</mandatory>
               <default>false</default>
            </property>
            
         </properties>       
         
         <mandatory-aspects>         
            <aspect>cm:titled</aspect>
            <aspect>rma:recordComponentIdentifier</aspect>           
            <aspect>rma:commonRecordDetails</aspect>
         </mandatory-aspects>
         
      </type>
            
      <type name="rma:nonElectronicRecord">
         
         <title>Non-Electronic Record</title>
         <parent>cm:cmobject</parent>           
         
         <mandatory-aspects>         
            <aspect>rma:record</aspect>            
         </mandatory-aspects>
      
      </type>
    
   </types>
   
   <aspects>
   
      <aspect name="rma:undeclaredRecord">
         <title>Undeclared Record</title>         
      </aspect>
   
      <aspect name="rma:recordComponentIdentifier">
         <title>Record component identifier</title>         
         <properties>                
            <property name="rma:identifier">
               <title>Record Component Identifier</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
         </properties>
      </aspect>
      
      <aspect name="rma:vitalRecordDefinition">
         <title>Vital Record Definition</title>                  
         <properties>
            <property name="rma:reviewPeriod">
               <title>Review Period</title>
               <type>d:period</type>
               <mandatory>true</mandatory>
               <default>none|0</default>
            </property>            
            <property name="rma:vitalRecordIndicator">
               <title>Vital Record Indicator</title>
               <type>d:boolean</type>
               <mandatory>true</mandatory>
               <default>false</default>
            </property>            
         </properties>
      </aspect>
      
      
      
      <!-- Record Meta-data -->
         
      <aspect name="rma:record">
         <title>Record</title>
         
         <properties>
         
            <!-- rma:identifier used for the Unique Record Identifier -->
            <!-- cm:title used for the Title -->
            
            <property name="rma:dateFiled">
               <title>Date Filed</title>
               <type>d:date</type>
               <mandatory>true</mandatory>
            </property>
            
            <property name="rma:publicationDate">
               <title>Publication Date</title>
               <type>d:date</type>
               <mandatory>true</mandatory>
            </property>
            
            <property name="rma:originator">
               <title>Originator</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            
            <property name="rma:originatingOrganization">
               <title>Originating Organization</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
                                    
            <property name="rma:mediaType">
               <title>Media Type</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
            </property>
                        
            <property name="rma:format">
               <title>Format</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
            </property>
                        
            <property name="rma:dateReceived">
               <title>Date Received</title>
               <type>d:date</type>
               <mandatory>false</mandatory>
            </property> 
                        
            <!-- TODO
                 Do we need to model this as broken up address?  
                 Should we have a separate property for other address or just a multivalue property?
            -->
            <property name="rma:address">
               <title>Address</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
            </property>                        
            <property name="rma:otherAddress">
               <title>Other Address</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
            </property>    
            
            <!-- TODO - remove this user-defined property (test example only) prior to release and fix-up associated unit tests -->
            <property name="rma:projectNameList">
               <title>Project Name</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
               <multiple>true</multiple>
               <constraints>
                  <constraint ref="rma:prjList"/>
               </constraints>
            </property>
            
         </properties>
         
         <mandatory-aspects>
            <aspect>cm:titled</aspect>
            <aspect>rma:recordComponentIdentifier</aspect>
            <aspect>rma:commonRecordDetails</aspect>
         </mandatory-aspects>
         
      </aspect>
      
      <aspect name="rma:commonRecordDetails">
        <properties>
            
            <property name="rma:location">
               <title>Location</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
            </property> 
            
            <property name="rma:supplementalMarkingList">
               <title>Supplemental Marking List</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
               <multiple>true</multiple>
               <constraints>
                  <constraint ref="rma:smList"/>
               </constraints>
            </property>
            
        </properties>
      </aspect>                         
   
      <!-- State management aspects -->   
   
      <aspect name="rma:vitalRecord">
         <title>Vital Record</title>         
         <properties>                
            <property name="rma:reviewAsOf">
               <title>Review as of date</title>
               <type>d:date</type>
               <mandatory>false</mandatory>
            </property>
         </properties>
      </aspect> 
      
      <aspect name="rma:dispositionInstructions">
        <title>Disposition Instructions</title>         
         <associations>
            
            <child-association name="rma:dispositionInstructions">
                <title>Disposition Definition</title>
                <source>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </source>
                <target>
                    <class>rma:dispositionDefinition</class>
                    <mandatory>false</mandatory>
                    <many>true</many>
                </target>
            </child-association>
         
         </associations>
      </aspect>
      
      <aspect name="rma:dispositionSchedule">
         <title>Next Disposition Action</title>         
         <properties>            
            <property name="rma:dispositionActionId">
               <title>Disposition Action Id</title>
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>    
            <property name="rma:dispositionAction">
               <title>Disposition Action</title> 
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>              
            <property name="rma:dispositionAsOf">
               <title>Disposition Action Date</title>
               <type>d:date</type>
               <mandatory>true</mandatory>
            </property>
            
            <!-- TODO need to model events complete here -->
            
            <!-- TODO model previous action information -->
            
            <property name="rma:previousDispositionAction">
               <title>Previous Disposition Action</title> 
               <type>d:text</type>
               <protected>true</protected>
               <mandatory>false</mandatory>
            </property>            
            <property name="rma:previousDispositionDate">
               <title>Previous Disposition Date</title> 
               <type>d:date</type>
               <protected>true</protected>
               <mandatory>false</mandatory>
            </property>
                        
         </properties>
         
         <!-- TODO association linking back to disposition action ?? -->
         <!-- TODO association linking record back to record category instead ?? -->
         
      </aspect>
   
      <aspect name="rma:cutOff">
         <title>Cut Off</title>         
         <properties>                
            <property name="rma:cutOffDate">
               <title>Cut Off Date</title>
               <type>d:date</type>
               <mandatory>true</mandatory>
            </property>
         </properties>
      </aspect>
      
      <aspect name="rma:caveatConfigRoot">
         <title>Caveat Config Root</title>
         <associations>
            <child-association name="rma:caveatConfigAssoc">
               <source>
                  <mandatory>true</mandatory>
                  <many>false</many>
               </source>
               <target>
                  <class>rma:caveatConfig</class>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </target>
               <duplicate>false</duplicate>
            </child-association>
         </associations>
      </aspect>
      
   </aspects>
   
</model>