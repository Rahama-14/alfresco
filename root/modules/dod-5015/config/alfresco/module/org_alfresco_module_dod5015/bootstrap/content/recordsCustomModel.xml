<?xml version="1.0" encoding="UTF-8"?>

<!-- Definition of Records Management Model -->

<!-- Note: the rmc: namespace is defined further on in the document -->
<model name="rmc:rmcustom" xmlns="http://www.alfresco.org/model/dictionary/1.0">

   <!-- Meta-data about the model -->
   <description>Records Management Custom Model</description>
   <author>Neil McErlean</author>
   <version>1.0</version>
   
   <!-- Imports are required to allow references to definitions in other models -->
   <imports>
      <!-- Import Alfresco DOD 5015 Records Management Definitions -->
      <import uri="http://www.alfresco.org/model/dod5015/1.0" prefix="dod"/>
      <!-- Import Alfresco Records Management Definitions -->
      <import uri="http://www.alfresco.org/model/recordsmanagement/1.0" prefix="rma"/>
      <!-- Import Alfresco Dictionary Definitions -->
      <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d"/>
      <!-- Import Alfresco Content Domain Model Definitions -->
      <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm"/>
      <!-- Import Alfresco Content Domain Model Definitions -->
      <import uri="http://www.alfresco.org/model/system/1.0" prefix="sys" />
   </imports>
   
   <!-- Records Management Custom Models Namespace -->
   <namespaces>
      <namespace uri="http://www.alfresco.org/model/rmcustom/1.0" prefix="rmc"/>
   </namespaces>
   
   <constraints>
   
      <!-- Note: intentionally empty list of values - allowed values can be added/updated dynamically -->
      <constraint name="rmc:smList" type="org.alfresco.module.org_alfresco_module_dod5015.caveat.RMListOfValuesConstraint">
         <title>Supplemental Markings</title>
         <parameter name="allowedValues">
            <list>
            </list>
            </parameter>
         <parameter name="caseSensitive"><value>true</value></parameter>
      </constraint>
      
      <!-- TODO - remove this constraint (test example only) prior to release and fix-up associated unit tests -->
      <constraint name="rmc:prjList" type="org.alfresco.module.org_alfresco_module_dod5015.caveat.RMListOfValuesConstraint">
         <title>Projects</title>
         <parameter name="allowedValues">
            <list>
               <value>Project A</value>
               <value>Project B</value>
               <value>Project C</value>
            </list>
         </parameter>
         <parameter name="caseSensitive"><value>true</value></parameter>
      </constraint>
      
   </constraints>
   
   <aspects>
   
      <aspect name="rmc:customSupplementalMarkingList">
         <properties>
            <property name="rmc:supplementalMarkingList">
               <title>Supplemental Marking List</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
               <multiple>true</multiple>
               <constraints>
                  <constraint ref="rmc:smList"/>
               </constraints>
            </property>
         </properties>
      </aspect>
      
      <!-- These aspects are intentionally empty. New references and/or properties
           will be defined at runtime. These new definitions will then be
           programmatically added to these aspects. -->
      <aspect name="rmc:customAssocs">
         
         <title>Records Management Custom Associations</title>
         
         <associations>
            
            <child-association name="rmc:null__SupersedBy__Supersedes">
                <source>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </source>
                <target>
                    <class>rma:record</class>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </target>
            </child-association>
            
            <child-association name="rmc:null__ObsoletedBy__Obsoletes">
                <source>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </source>
                <target>
                    <class>rma:record</class>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </target>
            </child-association>
            
            <child-association name="rmc:null__VersionedBy__Versions">
                <source>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </source>
                <target>
                    <class>rma:record</class>
                    <mandatory>false</mandatory>
                    <many>false</many>
                </target>
            </child-association>
         
         </associations>
      </aspect>

      <aspect name="rmc:customRecordSeriesProperties">
         <title>Properties for DOD5015 Custom Record Series</title>
      </aspect>
      <aspect name="rmc:customRecordCategoryProperties">
         <title>Properties for DOD5015 Custom Record Category</title>
      </aspect>
      <aspect name="rmc:customRecordFolderProperties">
         <title>Properties for Custom Record Folder</title>
      </aspect>
      <aspect name="rmc:customRecordProperties">
         <title>Properties for Custom Record</title>
            
            <properties>
            
            <!--  TODO - remove this user-defined property (test example only) prior to release 
                  and fix-up associated unit tests to create it dynamically (eg. DOD5015Test.testCaveatConfig) 
              -->
            <property name="rmc:projectNameList">
               <title>Project Name</title>
               <type>d:text</type>
               <mandatory>false</mandatory>
               <multiple>true</multiple>
               <constraints>
                  <constraint ref="rmc:prjList"/>
               </constraints>
            </property>
            
            </properties>
            
      </aspect>
   </aspects>
</model>