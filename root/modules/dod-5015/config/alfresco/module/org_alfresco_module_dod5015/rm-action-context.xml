<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>

     <!-- Actions -->
    
    <bean id="rmAction" parent="action-executer" abstract="true">
        <property name="nodeService" ref="NodeService"/>
        <property name="contentService" ref="ContentService"/>
        <property name="dictionaryService" ref="DictionaryService"/>
        <property name="actionService" ref="ActionService"/>
        <property name="namespaceService" ref="NamespaceService"/>
        <property name="recordsManagementActionService" ref="RecordsManagementActionService"/>
        <property name="recordsManagementService" ref="RecordsManagementService"/>
        <property name="recordsManagementEventService" ref="RecordsManagementEventService"/>
        <property name="publicAction" value="false"/>
    </bean>
    
    <bean id="rmProxyAction" parent="action-executer" abstract="true">
        <property name="runtimeActionService" ref="actionService"/>
        <property name="recordsManagementActionService" ref="recordsManagementActionService"/>
        <property name="proxyInterfaces">
            <list>
                <value>org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction</value>
                <value>org.alfresco.repo.action.executer.ActionExecuter</value>
            </list>
        </property>
    </bean>
    
    <bean id="actionSecurity" abstract="true">
        <property name="authenticationManager">
            <ref bean="authenticationManager"/>
        </property>
        <property name="accessDecisionManager">
            <ref bean="accessDecisionManager"/>
        </property>
        <property name="afterInvocationManager">
            <ref bean="afterInvocationManager"/>
        </property>
    </bean>
    
    <bean id="actionProxy" abstract="true">
        
    </bean>

    <!-- file action -->
    <!-- Bound to policy: allow -->

    
    <bean id="file_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="file"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="file_security"/>
            </list>
        </property>
    </bean>

    <bean id="file_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_ALLOW
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <!-- disable normal registration - the proxy will do it so the proxy is registered -->
    <bean id="file" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.FileAction" parent="rmAction" init-method="hashCode" />    
    

    <!-- Cutoff action -->
    
    
    <bean id="cutoff_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="cutoff"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="cutoff_security"/>
            </list>
        </property>
    </bean>

    <bean id="cutoff_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ApproveRecordsScheduledForCutoff
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="cutoff" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.CutOffAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- Destroy -->
    
    <bean id="destroy_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="destroy"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="destroy_security"/>
            </list>
        </property>
    </bean>

    <bean id="destroy_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.DestroyRecordsScheduledForDestruction
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="destroy" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.DestroyAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- retain -->
    <!-- No permissoin?? : allow -->
    
    <bean id="retain_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="retain"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="retain_security"/>
            </list>
        </property>
    </bean>

    <bean id="retain_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_ALLOW
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="retain" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.RetainAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- open record folder -->
    
    <bean id="openRecordFolder_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="openRecordFolder"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="openRecordFolder_security"/>
            </list>
        </property>
    </bean>

    <bean id="openRecordFolder_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ReOpenFolders
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="openRecordFolder" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.OpenRecordFolderAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- close record folder -->
    
    <bean id="closeRecordFolder_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="closeRecordFolder"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="closeRecordFolder_security"/>
            </list>
        </property>
    </bean>

    <bean id="closeRecordFolder_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.CloseFolders
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="closeRecordFolder" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.CloseRecordFolderAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- reviewed -->
    
    <bean id="reviewed_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="reviewed"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="reviewed_security"/>
            </list>
        </property>
    </bean>

    <bean id="reviewed_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.CycleVitalRecords
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="reviewed" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.ReviewedAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- set up record folder -->
    <!-- bound to policy: allow -->
    
    <bean id="setupRecordFolder_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="setupRecordFolder"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="setupRecordFolder_security"/>
            </list>
        </property>
    </bean>

    <bean id="setupRecordFolder_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_ALLOW
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="setupRecordFolder" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.SetupRecordFolderAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- declare record -->
    <!-- fileable?? -->
    
    <bean id="declareRecord_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="declareRecord"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="declareRecord_security"/>
            </list>
        </property>
    </bean>

    <bean id="declareRecord_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_ALLOW
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="declareRecord" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.DeclareRecordAction" parent="rmAction" init-method="hashCode"/> 
    
    <!-- undeclare record -->
    
    <bean id="undeclareRecord_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="undeclareRecord"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="undeclareRecord_security"/>
            </list>
        </property>
    </bean>

    <bean id="undeclareRecord_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.UndeclareRecords
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="undeclareRecord" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.UndeclareRecordAction" parent="rmAction" init-method="hashCode"/>

    <!-- Freeze record -->

    <bean id="freeze_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="freeze"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="freeze_security"/>
            </list>
        </property>
    </bean>

    <bean id="freeze_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_ALLOW
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="freeze" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.FreezeAction" parent="rmAction" init-method="hashCode"/>    

    
    <!-- broadcast vital record definition -->
    <!-- bound to policy: allow -->
    
    <bean id="broadcastVitalRecordDefinition_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="broadcastVitalRecordDefinition"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="broadcastVitalRecordDefinition_security"/>
            </list>
        </property>
    </bean>

    <bean id="broadcastVitalRecordDefinition_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_ALLOW
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="broadcastVitalRecordDefinition" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.BroadcastVitalRecordDefinitionAction"
                                            parent="rmAction" init-method="hashCode"/>
    
    <!-- define custom property -->
    
    <bean id="defineCustomProperty_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="defineCustomProperty"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="defineCustomProperty_security"/>
            </list>
        </property>
    </bean>

    <bean id="defineCustomProperty_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.CreateModifyDestroyRecordTypes
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="defineCustomProperty" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.DefineCustomPropertyAction"
          parent="rmAction" init-method="hashCode"/>
    
    <!-- define custom association -->
    
    <bean id="defineCustomAssociation_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="defineCustomAssociation"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="defineCustomAssociation_security"/>
            </list>
        </property>
    </bean>

    <bean id="defineCustomAssociation_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.CreateModifyDestroyReferenceTypes
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="defineCustomAssociation" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.DefineCustomAssociationAction"
          parent="rmAction" init-method="hashCode"/>
    
    <!-- complete event -->
    
    <bean id="completeEvent_proxy" class="org.alfresco.module.org_alfresco_module_dod5015.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
        <property name="target">
            <ref bean="completeEvent"/>
        </property>
        <property name="interceptorNames">
            <list>
                <idref bean="completeEvent_security"/>
            </list>
        </property>
    </bean>

    <bean id="completeEvent_security" class="org.alfresco.repo.security.permissions.impl.acegi.MethodSecurityInterceptor" parent="actionSecurity">
        <property name="objectDefinitionSource">
            <value>
                   org.alfresco.module.org_alfresco_module_dod5015.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.AddModifyEventDates
                   org.alfresco.service.cmr.security.PublicServiceAccessService.*=RM_ALLOW
            </value>
        </property>
    </bean>
    
    <bean id="completeEvent" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.CompleteEventAction" parent="rmAction" init-method="hashCode"/>
    
    <!-- Actions to create DOD 5015 custom types -->
    <bean id="applyScannedRecord" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.ApplyCustomTypeAction" parent="rmAction">
        <property name="customTypeAspect" value="dod:scannedRecord" />
    </bean>
    <bean id="applyPdfRecord" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.ApplyCustomTypeAction" parent="rmAction">
        <property name="customTypeAspect" value="dod:pdfRecord" />
    </bean>
    <bean id="applyDigitalPhotographRecord" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.ApplyCustomTypeAction" parent="rmAction">
        <property name="customTypeAspect" value="dod:digitalPhotographRecord" />
    </bean>
    <bean id="applyWebRecord" class="org.alfresco.module.org_alfresco_module_dod5015.action.impl.ApplyCustomTypeAction" parent="rmAction">
        <property name="customTypeAspect" value="dod:webRecord" />
    </bean>
    
</beans>    