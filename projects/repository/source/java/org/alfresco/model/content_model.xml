<model name="alf:contentmodel" xmlns="http://www.alfresco.org/dictionary/0.1">

   <!-- TODO: Look at splitting some definitions out into
              a) system level - repository internal types/aspects
              b) application level - specific to application
              
              leaving content domain specific types here -->


   <description>Alfresco Content Model</description>
   <author>Alfresco</author>
   <published>2005-06-03</published>
   <version>0.1</version>

   <imports>
      <import uri="http://www.alfresco.org/dictionary/0.1" prefix="d"/>
   </imports>
   
   <namespaces>
      <!-- TODO: Change this URI to something like http://www.alfresco.org/content/1.0 -->
      <namespace uri="http://www.alfresco.org/1.0" prefix="alf"/>
   </namespaces>

   
   <types>
   
      <type name="alf:cmobject">
         <title>Object</title>
         <properties>
            <property name="alf:name">
               <type>d:text</type>
            </property>
         </properties>
         <mandatory-aspects>
            <aspect>alf:auditable</aspect>
         </mandatory-aspects>
      </type>
      
      <type name="alf:folder">
         <title>Folder</title>
         <parent>alf:cmobject</parent>
         <properties>
            <property name="alf:orderedchildren">
               <type>d:boolean</type>
            </property>
         </properties>
         <associations>
            <child-association name="alf:contains">
               <source>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </source>
               <target>
                  <class>alf:cmobject</class>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
               <duplicate>false</duplicate>
            </child-association>
         </associations>
      </type>
      
      <type name="alf:content">
         <title>Content</title>
         <parent>alf:cmobject</parent>
         <properties>
            <property name="alf:contentUrl">
               <type>d:text</type>
               <mandatory>false</mandatory>
               <!--- Index content in the background -->
               <index enabled="true">
                  <atomic>true</atomic>
                  <stored>false</stored>
                  <tokenised>true</tokenised>
               </index>
            </property>
            <property name="alf:mimetype">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            <property name="alf:encoding">
               <type>d:text</type>
               <mandatory>false</mandatory>
            </property>
            <property name="alf:size">
               <!-- This property should be system maintained -->
               <type>d:long</type>
               <mandatory>false</mandatory>
            </property>
         </properties>
      </type>

      <type name="alf:linkfile">
         <title>Link File</title>
         <parent>alf:cmobject</parent>
         <properties>
            <property name="alf:path">
               <type>d:path</type>
            </property>
         </properties>
      </type>
      
      <type name="alf:person">
         <title>Person</title>
         <properties>
            <property name="alf:userName">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            <property name="alf:homeFolder">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
             <property name="alf:firstName">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            <property name="alf:lastName">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            <property name="alf:middleName">
               <type>d:text</type>
            </property>
            <property name="alf:email">
               <type>d:text</type>
            </property>
            <property name="alf:organizationId">
               <type>d:text</type>
            </property>
         </properties>
      </type>


      <!-- system level ??? -->

      <type name="alf:base">
         <title>Base</title>
      </type>

      <type name="alf:reference">
         <title>Reference</title>
         <parent>alf:base</parent>
         <properties>
            <property name="alf:reference">
               <type>d:noderef</type>
               <mandatory>true</mandatory>
            </property>
         </properties>
      </type>

      <type name="alf:container">
         <title>Container</title>
         <parent>alf:base</parent>
         <associations>
            <child-association name="alf:children">
               <target>
                  <class>alf:base</class>
               </target>
            </child-association>
         </associations>
      </type>

      <type name="alf:store_root">
         <title>Store Root</title>
         <parent>alf:container</parent>
         <mandatory-aspects>
            <aspect>alf:aspect_root</aspect>
         </mandatory-aspects>
      </type>

      <type name="alf:category_root">
         <title>Category Root</title>
         <parent>alf:cmobject</parent>
         <associations>
            <child-association name="alf:categories">
               <target>
                  <class>alf:category</class>
               </target>
            </child-association>
         </associations>
         <mandatory-aspects>
            <aspect>alf:aspect_root</aspect>
         </mandatory-aspects>
      </type>
      
      <type name="alf:category">
         <title>Category</title>
         <parent>alf:cmobject</parent>
         <associations>
            <child-association name="alf:subcategories">
               <target>
                  <class>alf:base</class>
               </target>
            </child-association>
         </associations>
      </type>
      
      <type name="alf:permissionrole">
         <title>Permission</title>
         <properties>
            <property name="alf:role">
               <!-- need to have means to identify root instance of appropriate category -->
               <type>d:category</type>
            </property>
         </properties>
         <associations>
            <association name="alf:person">
               <source>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </source>
               <target>
                  <class>alf:person</class>
                  <mandatory>true</mandatory>
                  <many>false</many>
               </target>
            </association>
         </associations>
      </type>

      <type name="alf:rulecontent">
         <title>Rule Content</title>
         <parent>alf:content</parent>
         <properties>
            <property name="alf:localScope">
               <type>d:boolean</type>
            </property>
         </properties>
      </type>


      <!-- Application level ???? -->

      <type name="alf:savedquerycontent">
         <title>Saved Query</title>
         <parent>alf:content</parent>
      </type>

      <type name="alf:systemfolder">
         <title>System Folder</title>
         <parent>alf:folder</parent>
      </type>
      
      <!-- TODO: Glossary will be revisited when implementation is better understood -->
      <type name="alf:glossary">
         <parent>alf:folder</parent>
         <!--
         <mandatory-aspects>
            <aspect>CategoryContainable</aspect>
         </mandatory-aspects>
         <associations>
            <association name="alf:namespace">
               <target-type>Category</target-type>
               <target-multiplicity>0..*</target-multiplicity>
               <source-mulitplicity>0..1<source-multiplicity>
               <duplicates-allowed>false</duplicates-allowed>
            </association>
         </associations>
         -->
      </type>

      <type name="alf:configurations">
         <title>Configurations</title>
         <parent>alf:folder</parent>
      </type>

      <type name="alf:propertyvalue">
         <title>Property Value</title>
         <parent>alf:cmobject</parent>
      </type>
      
      <type name="alf:valuestring">
         <title>String Value</title>
         <parent>alf:propertyvalue</parent>
         <properties>
            <property name="alf:stringValue">
               <type>d:text</type>
            </property>
         </properties>
      </type>
      
      <type name="alf:valuedate">
         <title>Date Value</title>
         <parent>alf:propertyvalue</parent>
         <properties>
            <property name="alf:datevalue">
               <type>d:datetime</type>
            </property>
         </properties>
      </type>
      
      <type name="alf:valueinteger">
         <title>Integer Value</title>
         <parent>alf:propertyvalue</parent>
         <properties>
            <property name="alf:intvalue">
               <type>d:int</type>
            </property>
         </properties>
      </type>
      
      <type name="alf:valueboolean">
         <title>Boolean Value</title>
         <parent>alf:propertyvalue</parent>
         <properties>
            <property name="alf:booleanvalue">
               <type>d:boolean</type>
            </property>
         </properties>
      </type>
      
      <type name="alf:valuelong">
         <title>Long Value</title>
         <parent>alf:propertyvalue</parent>
         <properties>
            <property name="alf:longvalue">
               <type>d:long</type>
            </property>
         </properties>
      </type>
      
      <type name="alf:valuefloat">
         <parent>alf:propertyvalue</parent>
         <properties>
            <property name="alf:floatvalue">
               <type>d:float</type>
            </property>
         </properties>
      </type>
   
      <type name="alf:user">
         <title>Temporary User Type</title>
         <properties>
            <property name="alf:username">
               <type>d:text</type>
            </property>
            <property name="alf:password">
               <type>d:text</type>
            </property>
            <property name="alf:accountEnabled">
               <type>d:boolean</type>
            </property>
            <property name="alf:accountExpiry">
               <type>d:datetime</type>
            </property>
            <property name="alf:credentialsExpiry">
               <type>d:datetime</type>
            </property>
            <property name="alf:accountLocked">
               <type>d:boolean</type>
            </property>
            <property name="alf:salt">
               <type>d:text</type>
            </property>
         </properties>
      </type>
      
   </types>
   
   
   <aspects>
   
      <aspect name="alf:titled">
         <title>Titled</title>
         <properties>
            <property name="alf:title">
               <type>d:text</type>
            </property>
            <property name="alf:description">
               <type>d:text</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:auditable">
         <title>Auditable</title>
         <properties>
            <property name="alf:created">
               <type>d:datetime</type>
            </property>
            <property name="alf:creator">
               <!-- TODO: Association to User/Person? -->
               <type>d:text</type>
            </property>
            <property name="alf:modified">
               <type>d:datetime</type>
            </property>
            <property name="alf:modifier">
               <!-- TODO: Association to User/Person? -->
               <type>d:text</type>
            </property>
            <property name="alf:accessed">
               <type>d:datetime</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:inlineeditable">
         <title>Inline Editable</title>
         <properties>
            <property name="alf:editInline">
               <type>d:boolean</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:localizable">
         <title>Localizable</title>
         <properties>
            <property name="alf:locale">
               <!-- need to have means to identify root instance of appropriate category -->
               <type>d:category</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:translatable">
         <title>Translatable</title>
         <parent>alf:localizable</parent>
         <!-- TODO: Support mandatory-aspects on an aspect in the meta-model
         <mandatory-aspects>
            <aspect>alf:localizable</aspect>
         </mandatory-aspects>
         -->
         <associations>
            <association name="alf:translations">
               <source>
                  <role>alf:translationOf</role>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </source>
               <target>
                  <class>alf:content</class>
                  <role>alf:hasTranslation</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:transformable">
         <title>Transformable</title>
         <associations>
            <association name="alf:formats">
               <source>
                  <role>alf:formatOf</role>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </source>
               <target>
                  <class>alf:content</class>
                  <role>alf:hasFormat</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:complianceable">
         <title>Complianceable</title>
         <parent>alf:auditable</parent>
         <!-- TODO: Support mandatory-aspects on an aspect in the meta-model
         <mandatory-aspects>
            <aspect>Auditable</aspect>
         </mandatory-aspects>
         -->
         <properties>
            <property name="alf:removeAfter">
               <type>d:datetime</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:dublincore">
         <title>Dublin Core</title>
         <parent>alf:titled</parent>
         <!-- TODO: Support mandatory-aspects on an aspect in the meta-model
         <mandatory-aspects>
            <aspect>Auditable</aspect>
         </mandatory-aspects>
         -->
         <properties>
            <property name="alf:publisher">
               <type>d:text</type>
            </property>
            <property name="alf:contributor">
               <type>d:text</type>
            </property>
            <property name="alf:type">
               <type>d:text</type>
            </property>
            <property name="alf:identifier">
               <type>d:text</type>
            </property>
            <property name="alf:dcsource">
               <type>d:text</type>
            </property>
            <property name="alf:coverage">
               <type>d:text</type>
            </property>
            <property name="alf:rights">
               <type>d:text</type>
            </property>
            <property name="alf:subject">
               <type>d:text</type>
            </property>
         </properties>
      </aspect>
   
      <!--
      <aspect name="alf:subjectable">
         <title>Subjectable</title>
         <mandatory-aspects>
            <aspect>Auditable</aspect>
         </mandatory-aspects>
         <properties>
            <property name="alf:subject">
               <type>d:text</type>
            </property>
         </properties>
      </aspect>
      -->
   
      <aspect name="alf:basable">
         <title>Basable</title>
         <associations>
            <association name="alf:basis">
               <source>
                  <role>alf:basedOn</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </source>
               <target>
                  <class>alf:content</class>
                  <role>alf:hasBasis</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:partable">
         <title>Partable</title>
         <associations>
            <association name="alf:parts">
               <source>
                  <role>alf:partOf</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </source>
               <target>
                  <class>alf:content</class>
                  <role>alf:hasPart</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:referenceable">
         <title>Referencable</title>
         <associations>
            <association name="alf:references">
               <source>
                  <role>alf:referencedBy</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </source>
               <target>
                  <class>alf:content</class>
                  <role>alf:references</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:replaceable">
         <title>Replacable</title>
         <associations>
            <association name="alf:replaces">
               <source>
                  <role>alf:replacedBy</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </source>
               <target>
                  <class>alf:content</class>
                  <role>alf:replaces</role>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:effectivity">
         <title>Effectivity</title>
         <properties>
            <property name="alf:from">
               <type>d:datetime</type>
            </property>
            <property name="alf:to">
               <type>d:datetime</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:summarizable">
         <title>Summarizable</title>
         <properties>
            <property name="alf:summary">
               <type>d:text</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:countable">
         <title>Countable</title>
         <properties>
            <property name="alf:hits">
               <type>d:int</type>
            </property>
         </properties>
      </aspect>
   
      <aspect name="alf:copiedfrom">
         <title>Copied From</title>
         <properties>
            <property name="alf:source">
               <type>d:noderef</type>
               <protected>true</protected>
               <mandatory>true</mandatory>
               <multiple>true</multiple>
            </property>
         </properties>
      </aspect>
      
      <aspect name="alf:workingcopy">
         <title>Working Copy</title>
      </aspect>
   
      <aspect name="alf:versionable">
         <title>Versionable</title>
         <properties>
            <property name="alf:versionLabel">
               <type>d:text</type>
            </property>
          </properties>
      </aspect>
      
      <aspect name="alf:lockable">
         <title>Lockable</title>
         <properties>
            <property name="alf:lockOwner">
               <type>d:noderef</type>
               <protected>true</protected>
            </property>
            <property name="alf:lockType">
               <type>d:text</type>
               <protected>true</protected>
            </property>
            <property name="alf:lockIsDeep">
               <type>d:boolean</type>
               <protected>true</protected>
            </property>
         </properties>
      </aspect>
      
      <aspect name="alf:subscribable">
         <associations>
            <association name="alf:subscribedBy">
               <source>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </source>
               <target>
                  <class>alf:person</class>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:classifiable">
         <title>Classifiable</title>
      </aspect>
   
      <aspect name="alf:generalclassifiable">
         <title>General Classifiable</title>
         <parent>alf:classifiable</parent>
         <properties>
            <property name="alf:categories">
               <type>d:category</type>
               <mandatory>false</mandatory>
               <multiple>true</multiple>
               <index enabled="true">
                  <atomic>true</atomic>
                  <stored>true</stored>
                  <tokenised>true</tokenised>
               </index>
            </property>         
         </properties>
      </aspect>
   
      <aspect name="alf:permissionable">
         <title>Permissionable</title>
      </aspect>
   
      <aspect name="alf:rolepermissionable">
         <title>Role Permissionable</title>
         <parent>alf:permissionable</parent>
         <associations>
            <association name="alf:personRole">
               <source>
                  <mandatory>false</mandatory>
                  <many>true</many>
               </source>
               <target>
                  <class>alf:person</class>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:workflow">
         <title>Workflow</title>
      </aspect>
   
      <aspect name="alf:simpleworkflow">
         <parent>alf:workflow</parent>
         <properties>
            <property name="alf:approveStep">
               <type>d:text</type>
               <protected>true</protected>
            </property>
            <property name="alf:approveFolder">
               <type>d:path</type>
               <protected>true</protected>
            </property>
            <property name="alf:approveMove">
               <type>d:boolean</type>
            </property>
            <property name="alf:rejectStep">
               <type>d:text</type>
               <protected>true</protected>
            </property>
            <property name="alf:rejectFolder">
               <type>d:path</type>
               <protected>true</protected>
            </property>
            <property name="alf:rejectMove">
               <type>d:boolean</type>
            </property>
         </properties>
      </aspect>

      <!-- System / Application level ??? -->

      <aspect name="alf:aspect_root">
         <title>Root</title>
      </aspect>
      
      <aspect name="alf:configurable">
         <title>Configurable</title>
         <associations>
            <association name="alf:configurations">
               <source>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </source>
               <target>
                  <class>alf:configurations</class>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </target>
            </association>
         </associations>
      </aspect>
   
      <aspect name="alf:actionable">
         <title>Actionable</title>
         <parent>alf:configurable</parent>
      </aspect>
         
      <aspect name="alf:uifacets">
         <title>UI Facets</title>
         <parent>alf:titled</parent>
         <properties>
            <property name="alf:icon">
               <type>d:text</type>
            </property>
         </properties>
      </aspect>
   
   </aspects>

</model>
