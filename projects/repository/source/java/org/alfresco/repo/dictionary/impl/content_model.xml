<model name="alf:contentmodel" xmlns="http://www.alfresco.org/dictionary/0.1">

   <!--
      TODO: Replace with domain model from Paul
      
      TODO: Some base types/aspects should be split out into core
            model e.g. root
   -->

   <description>Alfresco Content Model</description>
   <author>Alfresco</author>
   <published>2005-05-30</published>
   <version>0.1</version>
   
   <imports>
      <import uri="http://www.alfresco.org/dictionary/0.1" prefix="d"/>
   </imports>
   
   <namespaces>
      <namespace uri="http://www.alfresco.org/1.0" prefix="alf"/>
   </namespaces>

   <types>
      
      <type name="alf:base">
      </type>

      <type name="alf:reference">
         <parent>alf:base</parent>
         
         <properties>
            <property name="alf:reference">
               <type>d:noderef</type>
               <mandatory>true</mandatory>
            </property>
         </properties>
      </type>

      <type name="alf:content">
         <parent>alf:base</parent>
         <mandatory-aspects>
            <aspect>alf:aspect_content</aspect>
         </mandatory-aspects>
      </type>      
   
      <type name="alf:container">
         <parent>alf:base</parent>
         
         <associations>
            <child-association name="alf:children">
               <target>
                  <class>alf:base</class>
               </target>
            </child-association>
         </associations>
      </type>

      <type name="alf:file">
         <parent>alf:content</parent>
      </type>
      
      <type name="alf:folder">
         <parent>alf:base</parent>
         
         <associations>
            <child-association name="alf:files">
               <target>
                  <class>alf:file</class>
               </target>
            </child-association>
            <child-association name="alf:folders">
               <target>
                  <class>alf:folder</class>
               </target>
            </child-association>
         </associations>
      </type>

      <type name="alf:category">
         <parent>alf:base</parent>
         
         <associations>
            <child-association name="alf:subcategories">
               <target>
                  <class>alf:base</class>
               </target>
            </child-association>
         </associations>
      </type>
      
      <type name="alf:store_root">
         <parent>alf:container</parent>
         <mandatory-aspects>
            <aspect>alf:aspect_root</aspect>
         </mandatory-aspects>
      </type>
      
      <type name="alf:category_root">
         <parent>alf:base</parent>
         
         <associations>
            <child-association name="alf:categories">
               <target>
                  <class>alf:category</class>
               </target>
            </child-association>
         </associations>
         
         <mandatory-aspects>
            <aspect>alf:aspect_root</aspect>
         </mandatory-aspects>
      </type>
      
   </types>
   
   <aspects>
      <aspect name="alf:space">
         <properties>
            <property name="alf:createddate">
               <type>d:datetime</type>
            </property>
            <property name="alf:modifieddate">
               <type>d:datetime</type>
            </property>
            <property name="alf:spacetype">
               <type>d:text</type>
            </property>
            <property name="alf:icon">
               <type>d:text</type>
            </property>
            <property name="alf:description">
               <type>d:text</type>
            </property>
         </properties>
      </aspect>
      
      <aspect name="alf:aspect_content">
         <properties>
            <property name="alf:contentUrl">
               <type>d:text</type>
            </property>
            <property name="alf:encoding">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            <property name="alf:mimetype">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
         </properties>
      </aspect>
      
      <aspect name="alf:version">
         <properties>
            <property name="alf:currentVersionLabel">
               <type>d:text</type>
            </property>
          </properties>
      </aspect>
      
      <aspect name="alf:aspect_root">
      </aspect>
      
      <aspect name="alf:copy">
         <properties>
            <property name="alf:copyReference">
               <type>d:noderef</type>
               <mandatory>true</mandatory>
               <multiple>true</multiple>
            </property>
         </properties>
      </aspect>
      
      <aspect name="alf:workingCopy">
      </aspect>

      <aspect name="alf:lock">
         <properties>
            <property name="alf:lock">
               <type>d:text</type>
            </property>
            <property name="alf:lockType">
               <type>d:text</type>
            </property>
         </properties>
      </aspect>

      <aspect name="alf:aspect_categorisation">
      </aspect>      

      <aspect name="alf:aspect_gen_categorisation">
         <parent>alf:aspect_categorisation</parent>
         
         <properties>
            <property name="alf:categorisation">
               <type>d:category</type>
               <mandatory>true</mandatory>
               <index enabled="true">
                  <atomic>true</atomic>
                  <stored>true</stored>
                  <tokenised>true</tokenised>
               </index>
            </property>         
         </properties>
      </aspect>      
      
   </aspects>
   
</model>
