<project name="web-client" default="build">

   <path id="common.path" path="${basedir}/../.." />
   <property name="common.dir" refid="common.path" />
   <import file="${common.dir}/common.xml" />

   <!-- we want to build an EAR file in this project -->
   <target name="package" depends="package-ear" />

   <!--
   <target name="assemble-ear" depends="package-war">
      <copy todir="${assemble.dir}">
         <fileset dir="${dist.dir}" includes="*.war" />
      </copy>
      <copy todir="${assemble.dir}/META-INF">
         <fileset dir="${src.metainf.dir}" includes="jboss-app.xml" />
      </copy>
   </target>
   -->

   <target name="package-war" depends="package-jar" description="Packages the WAR file">
      <mkdir dir="${dist.dir}" />
      <war warfile="${dist.dir}\${war.name}" webxml="${src.web.dir}\WEB-INF\web.xml">
         <fileset dir="${src.web.dir}" excludes="WEB-INF\web.xml" />
         <zipfileset dir="${common.lib.dir}" prefix="WEB-INF\lib"
                     includes="${webinf.lib.includes}" 
                     excludes="${webinf.lib.excludes}" />
         <zipfileset dir="${common.lib.dir}/eclipse" includes="*.jar" prefix="WEB-INF\lib" />
         <zipfileset dir="${dist.dir}" includes="${jar.name}" prefix="WEB-INF\lib" />
         <zipfileset dir="${common.dir}/projects/core/build/dist" prefix="WEB-INF\lib"
                     includes="core.jar" />
         <zipfileset dir="${common.dir}/projects/repository/build/dist" prefix="WEB-INF\lib"
                     includes="repository.jar" />
      </war>
   </target>

</project>